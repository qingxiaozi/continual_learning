
=== 数据环境初始化完成 ===
狄利克雷分布系数 α = 0.5
初始化20辆车的数据分配
=====================

黄金模型加载成功，数据集: office31, 类别数: 31
加载已训练的黄金模型: /home/heruiqing_233-/workspace/continual_learning/results/golden_model_office31.pth
初始化 5 个基站
初始化 20辆智能车辆
初始连接建立完成: 20/20 车辆成功连接

=== 物理环境初始化完成 ===
基站数量: 5
车辆数量: 20
已连接车辆: 20
基站平均利用率: 0.08
==========================

============================================================
开始车路协同持续学习联合优化
数据集: office31
车辆数量: 20
训练会话数: 30
============================================================

=== 训练会话 1/30 ===
新域 amazon 已加入已见域
已加载 amazon 域的数据集 - 训练集: 1691, 验证集: 563, 测试集: 563

=== office31_amazon 训练数据分配统计 ===
总训练样本数: 1691
车辆训练数据量: 平均84.5, 最小58, 最大109
训练数据异构程度: 标准差15.4
=======================================

车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 52
上传批次: [3, 0, 3, 3, 2, 1, 2, 2, 0, 5, 2, 5, 2, 2, 4, 1, 5, 4, 1, 5]
带宽分配: [0.00478753 0.         0.01126998 0.01249287 0.0140771  0.01191392
 0.00638826 0.01496796 0.         0.04457067 0.1157386  0.51845043
 0.00394263 0.04151168 0.05164577 0.00273213 0.109734   0.00503682
 0.0129394  0.01780025]

缓存管理
当前缓存总批次: 52
缓存中新数据批次：52
缓存中旧数据批次：0
Epoch 1, train_loss: 71.9160, val_loss: 4.3600 *
Epoch 2, train_loss: 46.1918, val_loss: 3.5004 *
Epoch 3, train_loss: 36.9104, val_loss: 4.0276, patience_counter/patience: 1/5
Epoch 4, train_loss: 30.2610, val_loss: 4.0626, patience_counter/patience: 2/5
Epoch 5, train_loss: 25.6297, val_loss: 4.0619, patience_counter/patience: 3/5
Epoch 6, train_loss: 22.0892, val_loss: 3.6924, patience_counter/patience: 4/5
Epoch 7, train_loss: 19.5805, val_loss: 3.9398, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 19.580549020033615, 'epoch_losses': [71.916030223553, 46.19181970449594, 36.91036040966328, 30.261041237757755, 25.62972692342905, 22.08923233472384, 19.580549020033615], 'val_losses': [4.360029386149512, 3.5003581245740256, 4.027635203467475, 4.062609937455919, 4.061895973152584, 3.6923664013544717, 3.9397690693537393], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.77381134 0.         0.         0.         0.
 0.         0.         0.08037689 0.         0.         0.
 0.         0.         0.06009646 0.17785175 0.         0.01426413
 0.         0.         0.         0.07797017]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 0,
    "new_data_size": 3,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 0,
    "new_data_size": 3,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 0,
    "new_data_size": 3,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 0,
    "new_data_size": 1,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  },
  "6": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 0,
    "new_data_size": 2,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.7738113403320312
    ]
  },
  "14": {
    "old_data_size": 0,
    "new_data_size": 4,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 0,
    "new_data_size": 1,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  },
  "16": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0803768909894503,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 0,
    "new_data_size": 4,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0600964564543504,
      0.17785175488545343
    ]
  },
  "18": {
    "old_data_size": 0,
    "new_data_size": 1,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  },
  "19": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.014264126618703207,
      0.0,
      0.0,
      0.0,
      0.07797016547276424
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_0.png

通信计算
传输时延: 6.13s
标注时延: 0.02s
训练时延: 0.35s
广播时延: 5.39s
通信时延: 11.89s
连续学习指标 (任务 1):
  AA: 0.1723   - 当前模型平均准确率
  AIA: 0.1723  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.1723
  current_domain_loss: 3.4041
total_delay:11.887291898011235
global_dataset_size:832
奖励计算 - 损失降幅: 544.7539, 奖励: 0.0551
数据异质性图已保存至./results/data_heterogeneity_session_0.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 2/30 ===
新域 webcam 已加入已见域
Session 1: 域切换 初始域 -> webcam
已加载 webcam 域的数据集 - 训练集: 477, 验证集: 159, 测试集: 159
域从 amazon 切换到 webcam，已提升缓存中的数据。

=== office31_webcam 训练数据分配统计 ===
总训练样本数: 477
车辆训练数据量: 平均23.9, 最小19, 最大36
训练数据异构程度: 标准差4.4
=======================================

车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 11
上传批次: [0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 2, 0]
带宽分配: [0.00000000e+00 3.63349563e-19 0.00000000e+00 0.00000000e+00
 0.00000000e+00 2.34855262e-02 7.14365545e-03 0.00000000e+00
 1.45398423e-03 0.00000000e+00 4.28301958e-01 2.56454722e-02
 2.76451638e-03 0.00000000e+00 4.45915066e-01 6.27060294e-03
 8.15316623e-03 0.00000000e+00 5.08660527e-02 0.00000000e+00]
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 61
缓存中新数据批次：11
缓存中旧数据批次：50
Epoch 1, train_loss: 36.4551, val_loss: 3.5178 *
Epoch 2, train_loss: 27.4860, val_loss: 3.8077, patience_counter/patience: 1/5
Epoch 3, train_loss: 22.1465, val_loss: 4.2585, patience_counter/patience: 2/5
Epoch 4, train_loss: 19.0569, val_loss: 3.9312, patience_counter/patience: 3/5
Epoch 5, train_loss: 16.9518, val_loss: 4.2714, patience_counter/patience: 4/5
Epoch 6, train_loss: 15.6461, val_loss: 4.0498, patience_counter/patience: 5/5
早停触发！在epoch 6停止
调试信息：
{'training_loss': 15.646105516152303, 'epoch_losses': [36.455102983068244, 27.486000811467406, 22.146459735807824, 19.056925070090372, 16.95184881179059, 15.646105516152303], 'val_losses': [3.5177619218826295, 3.8076926469802856, 4.25846037864685, 3.9312329292297363, 4.271378207206726, 4.049848175048828], 'actual_epochs': 6, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[ 0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.
 -0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.61875604
  0.          0.          0.          0.          0.          0.
  0.          0.          0.          0.          0.          0.
  0.          0.17719312  0.          0.          0.          0.
  0.03898444]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 2,
    "new_data_size": 0,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 1,
    "new_data_size": 1,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 2,
    "new_data_size": 0,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      -0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 2,
    "new_data_size": 0,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.6187560362894027
    ]
  },
  "15": {
    "old_data_size": 1,
    "new_data_size": 1,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 1,
    "new_data_size": 2,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.17719312183192518
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.038984442343477345
    ]
  },
  "8": {
    "old_data_size": 0,
    "new_data_size": 1,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_1.png

通信计算
传输时延: 14.25s
标注时延: 0.00s
训练时延: 0.35s
广播时延: 19.95s
通信时延: 34.55s
连续学习指标 (任务 2):
  AA: 0.1092   - 当前模型平均准确率
  AIA: 0.1407  - 平均增量准确率
  FM: 0.0231   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.0692
  current_domain_loss: 3.2926
total_delay:34.55451213116271
global_dataset_size:976
奖励计算 - 损失降幅: 196.0248, 奖励: 0.0058
数据异质性图已保存至./results/data_heterogeneity_session_1.png
Saved: session1_core_metrics_session1_20251211_144809.png
Saved: session1_accuracy_evolution_session1_20251211_144809.png
Saved: session1_sample_count_session1_20251211_144809.png
Saved: session1_communication_delay_session1_20251211_144809.png
Saved: session1_training_loss_session1_20251211_144809.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 3/30 ===
新域 dslr 已加入已见域
Session 2: 域切换 webcam -> dslr
已加载 dslr 域的数据集 - 训练集: 300, 验证集: 99, 测试集: 99
域从 webcam 切换到 dslr，已提升缓存中的数据。

=== office31_dslr 训练数据分配统计 ===
总训练样本数: 300
车辆训练数据量: 平均15.0, 最小10, 最大22
训练数据异构程度: 标准差2.7
=======================================

车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 4
上传批次: [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0]
带宽分配: [6.36822882e-16 1.41889714e-15 2.37758510e-15 5.21403273e-16
 5.33359032e-02 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 3.91804635e-01
 0.00000000e+00 2.66887130e-01 0.00000000e+00 2.87972332e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 64
缓存中新数据批次：4
缓存中旧数据批次：60
Epoch 1, train_loss: 27.9185, val_loss: 4.3224 *
Epoch 2, train_loss: 21.8449, val_loss: 4.0786 *
Epoch 3, train_loss: 18.5824, val_loss: 5.3950, patience_counter/patience: 1/5
Epoch 4, train_loss: 16.7151, val_loss: 5.1359, patience_counter/patience: 2/5
Epoch 5, train_loss: 15.1491, val_loss: 3.7694 *
Epoch 6, train_loss: 14.0776, val_loss: 3.9506, patience_counter/patience: 1/5
Epoch 7, train_loss: 13.2544, val_loss: 4.8771, patience_counter/patience: 2/5
Epoch 8, train_loss: 12.6916, val_loss: 3.8095, patience_counter/patience: 3/5
Epoch 9, train_loss: 11.9813, val_loss: 4.4050, patience_counter/patience: 4/5
Epoch 10, train_loss: 11.6907, val_loss: 3.5130 *
Epoch 11, train_loss: 11.2255, val_loss: 5.7044, patience_counter/patience: 1/5
Epoch 12, train_loss: 10.6443, val_loss: 4.2214, patience_counter/patience: 2/5
Epoch 13, train_loss: 10.3625, val_loss: 4.3112, patience_counter/patience: 3/5
Epoch 14, train_loss: 10.3301, val_loss: 4.1828, patience_counter/patience: 4/5
Epoch 15, train_loss: 9.8058, val_loss: 3.9976, patience_counter/patience: 5/5
早停触发！在epoch 15停止
调试信息：
{'training_loss': 9.805796593427658, 'epoch_losses': [27.918524771928787, 21.84487694501877, 18.582412391901016, 16.715129524469376, 15.149083346128464, 14.077586680650711, 13.25440938770771, 12.691637396812439, 11.981346890330315, 11.690718814730644, 11.225548833608627, 10.644340917468071, 10.36252011358738, 10.330072596669197, 9.805796593427658], 'val_losses': [4.322442667824881, 4.0785618509565085, 5.3950104032244, 5.13585547038487, 3.7694046837942943, 3.950578110558646, 4.877051966530936, 3.8095010689326694, 4.404958929334368, 3.513030529022217, 5.704428127833775, 4.221426725387573, 4.311204808098929, 4.182794945580619, 3.9976487159729004], 'actual_epochs': 15, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.05034722 1.16503616
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         4.6990229  0.         0.04305556 0.         0.
 0.         0.         0.         0.         0.         0.
 0.20726176 0.         0.01429765 0.         0.88657067 0.09303969
 0.         0.03842705 0.00826989 0.15256628]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.05034721541133794,
      1.1650361635468223
    ]
  },
  "3": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 2,
    "new_data_size": 0,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 2,
    "new_data_size": 0,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      4.6990228989584875
    ]
  },
  "15": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.04305555739186027,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.20726175978779793,
      0.0
    ]
  },
  "18": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.014297646893696352,
      0.0,
      0.8865706744519147
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0930396860296076,
      0.0,
      0.03842704929411411,
      0.008269885046915575,
      0.15256627547470006
    ]
  },
  "8": {
    "old_data_size": 1,
    "new_data_size": 0,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_2.png

通信计算
传输时延: 0.43s
标注时延: 0.00s
训练时延: 0.92s
广播时延: 4.03s
通信时延: 5.38s
连续学习指标 (任务 3):
  AA: 0.1589   - 当前模型平均准确率
  AIA: 0.1468  - 平均增量准确率
  FM: -0.0231   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.1010
  current_domain_loss: 3.5391
total_delay:5.377352328224529
global_dataset_size:1024
奖励计算 - 损失降幅: 16.0228, 奖励: 0.0029
数据异质性图已保存至./results/data_heterogeneity_session_2.png
Saved: session2_core_metrics_session2_20251211_145231.png
Saved: session2_accuracy_evolution_session2_20251211_145231.png
Saved: session2_sample_count_session2_20251211_145231.png
Saved: session2_communication_delay_session2_20251211_145231.png
Saved: session2_training_loss_session2_20251211_145231.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 4/30 ===
Session 3: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 34
上传批次: [3, 0, 1, 2, 0, 3, 4, 2, 1, 5, 1, 3, 3, 0, 3, 0, 0, 0, 2, 1]
带宽分配: [0.01094708 0.         0.0631879  0.0074534  0.         0.28132049
 0.05434839 0.10034852 0.00308223 0.08717307 0.01957028 0.25431603
 0.0191588  0.         0.02705824 0.         0.         0.
 0.02236664 0.04966892]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 6 缓存维护: 移除了 2 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 9 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 11 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 12 缓存维护: 移除了 1 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 14 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 82
缓存中新数据批次：34
缓存中旧数据批次：48
Epoch 1, train_loss: 11.7038, val_loss: 3.3953 *
Epoch 2, train_loss: 11.0393, val_loss: 4.1289, patience_counter/patience: 1/5
Epoch 3, train_loss: 10.5460, val_loss: 3.2860 *
Epoch 4, train_loss: 10.1155, val_loss: 2.9788 *
Epoch 5, train_loss: 9.6462, val_loss: 3.2379, patience_counter/patience: 1/5
Epoch 6, train_loss: 9.3111, val_loss: 3.4193, patience_counter/patience: 2/5
Epoch 7, train_loss: 8.9454, val_loss: 3.0235, patience_counter/patience: 3/5
Epoch 8, train_loss: 8.4883, val_loss: 4.0198, patience_counter/patience: 4/5
Epoch 9, train_loss: 8.2413, val_loss: 3.0635, patience_counter/patience: 5/5
早停触发！在epoch 9停止
调试信息：
{'training_loss': 8.24131737685785, 'epoch_losses': [11.703761682277772, 11.039273227133402, 10.545969474606398, 10.115464001167112, 9.646224301035812, 9.311124231757187, 8.945355322302841, 8.48828711742308, 8.24131737685785], 'val_losses': [3.3953111436631946, 4.128908475240071, 3.2859559059143066, 2.9788030717107983, 3.2378611697090998, 3.419264495372772, 3.0234870778189764, 4.019785463809967, 3.0635431740019055], 'actual_epochs': 9, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.35688343 0.53522571
 0.         0.         1.14745751 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.35044673
 0.         0.         0.06378472 0.10398108 0.         0.
 0.         0.04509735 0.08272786 0.01709792]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 3,
    "new_data_size": 1,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 2,
    "new_data_size": 2,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 3,
    "new_data_size": 1,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.3568834252473784,
      0.5352257054026534,
      0.0
    ]
  },
  "14": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      1.1474575100875484,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.35044672721769754
    ]
  },
  "18": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.06378472025801495,
      0.10398107708954228,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.045097346131394545,
      0.08272785907838404,
      0.017097924395305355
    ]
  },
  "8": {
    "old_data_size": 1,
    "new_data_size": 1,
    "total_size": 2,
    "quality_scores": [
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_3.png

通信计算
传输时延: 2.47s
标注时延: 0.01s
训练时延: 0.71s
广播时延: 4.27s
通信时延: 7.46s
连续学习指标 (任务 1):
  AA: 0.2133   - 当前模型平均准确率
  AIA: 0.1634  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2860
  current_domain_loss: 2.8043
total_delay:7.463030381366331
global_dataset_size:1312
奖励计算 - 损失降幅: 286.2527, 奖励: 0.0292
数据异质性图已保存至./results/data_heterogeneity_session_3.png
Saved: session3_core_metrics_session3_20251211_145553.png
Saved: session3_accuracy_evolution_session3_20251211_145553.png
Saved: session3_sample_count_session3_20251211_145553.png
Saved: session3_communication_delay_session3_20251211_145553.png
Saved: session3_training_loss_session3_20251211_145553.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 5/30 ===
Session 4: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 13
上传批次: [0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 2, 1, 1, 0, 0, 1, 1]
带宽分配: [0.00000000e+00 1.50269620e-16 0.00000000e+00 5.43196690e-02
 3.09683270e-02 3.92132155e-02 0.00000000e+00 1.91243117e-02
 4.41236253e-03 5.01725345e-02 6.29461413e-02 0.00000000e+00
 0.00000000e+00 1.71863830e-01 1.33125511e-01 2.06984053e-01
 0.00000000e+00 0.00000000e+00 6.85400428e-02 1.58330001e-01]
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 14 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 89
缓存中新数据批次：13
缓存中旧数据批次：76
Epoch 1, train_loss: 9.8915, val_loss: 3.4434 *
Epoch 2, train_loss: 9.4622, val_loss: 3.1487 *
Epoch 3, train_loss: 8.8961, val_loss: 4.1696, patience_counter/patience: 1/5
Epoch 4, train_loss: 8.3914, val_loss: 2.9391 *
Epoch 5, train_loss: 8.1173, val_loss: 3.3368, patience_counter/patience: 1/5
Epoch 6, train_loss: 7.7881, val_loss: 3.1869, patience_counter/patience: 2/5
Epoch 7, train_loss: 7.1326, val_loss: 2.7677 *
Epoch 8, train_loss: 6.6891, val_loss: 3.1096, patience_counter/patience: 1/5
Epoch 9, train_loss: 6.6041, val_loss: 3.2684, patience_counter/patience: 2/5
Epoch 10, train_loss: 6.2730, val_loss: 3.0575, patience_counter/patience: 3/5
Epoch 11, train_loss: 5.8734, val_loss: 3.1127, patience_counter/patience: 4/5
Epoch 12, train_loss: 5.7221, val_loss: 3.0274, patience_counter/patience: 5/5
早停触发！在epoch 12停止
调试信息：
{'training_loss': 5.722099673881959, 'epoch_losses': [9.891468712453092, 9.462152159615849, 8.896134494395739, 8.39138565170631, 8.117297542229128, 7.788089441449455, 7.1325723669502175, 6.689103774810105, 6.6041166541281715, 6.273035483413867, 5.873375994435857, 5.722099673881959], 'val_losses': [3.443352770805359, 3.1487071037292482, 4.169556832313537, 2.9391130447387694, 3.336806225776672, 3.18686785697937, 2.7676530122756957, 3.1096479654312135, 3.268396186828613, 3.0575212955474855, 3.1127407789230346, 3.027419662475586], 'actual_epochs': 12, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.37902046
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.27079707 0.         0.
 0.         0.         0.57137279 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.06570284 0.         0.09196034 0.
 0.         0.         0.         0.12730135 0.02867203 0.
 0.         0.         0.         0.         0.         0.
 0.71423496 0.0041977  0.         0.         0.56520658 0.15973446
 0.         0.         0.         0.         0.         0.
 0.26650405 0.18634137 0.00517874 0.01253238 0.17399349 0.
 0.         0.07797452 0.01501679 0.04562675 0.03625311]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 3,
    "new_data_size": 1,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.379020460535971,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.5713727927944633,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.06570284353213364
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.09196033839429363,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.12730135006851026,
      0.028672028123662714,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 3,
    "new_data_size": 1,
    "total_size": 4,
    "quality_scores": [
      0.714234956529703,
      0.004197695198353757,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.5652065789431668,
      0.1597344640935405,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.26650404787800286
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.1863413741079609,
      0.0051787415247284965,
      0.012532379017787034,
      0.17399349172463577,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.07797451836339543,
      0.015016787172703262,
      0.045626748478814455,
      0.03625311074631937
    ]
  },
  "8": {
    "old_data_size": 2,
    "new_data_size": 1,
    "total_size": 3,
    "quality_scores": [
      0.27079707317137985,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_4.png

通信计算
传输时延: 1.55s
标注时延: 0.00s
训练时延: 1.03s
广播时延: 4.17s
通信时延: 6.74s
连续学习指标 (任务 2):
  AA: 0.2244   - 当前模型平均准确率
  AIA: 0.1756  - 平均增量准确率
  FM: -0.0639   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2956
  current_domain_loss: 2.6904
total_delay:6.7445616649986935
global_dataset_size:1424
奖励计算 - 损失降幅: 257.9555, 奖励: 0.0269
数据异质性图已保存至./results/data_heterogeneity_session_4.png
Saved: session4_core_metrics_session4_20251211_150033.png
Saved: session4_accuracy_evolution_session4_20251211_150033.png
Saved: session4_sample_count_session4_20251211_150033.png
Saved: session4_communication_delay_session4_20251211_150033.png
Saved: session4_training_loss_session4_20251211_150033.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 6/30 ===
Session 5: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 2
上传批次: [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]
带宽分配: [3.11060678e-15 1.16606640e-01 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 8.83393360e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 90
缓存中新数据批次：2
缓存中旧数据批次：88
Epoch 1, train_loss: 6.7953, val_loss: 4.3062 *
Epoch 2, train_loss: 6.4889, val_loss: 3.1870 *
Epoch 3, train_loss: 6.3504, val_loss: 4.1378, patience_counter/patience: 1/5
Epoch 4, train_loss: 5.9273, val_loss: 3.4855, patience_counter/patience: 2/5
Epoch 5, train_loss: 5.6007, val_loss: 5.2307, patience_counter/patience: 3/5
Epoch 6, train_loss: 5.4513, val_loss: 4.7228, patience_counter/patience: 4/5
Epoch 7, train_loss: 5.2091, val_loss: 4.2064, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 5.209106408225166, 'epoch_losses': [6.795280112160577, 6.4889254940880665, 6.350378614001804, 5.927332761552599, 5.6006760968102345, 5.4513277106814915, 5.209106408225166], 'val_losses': [4.306195054735456, 3.186969654900687, 4.137772389820644, 3.485467399869646, 5.23067045211792, 4.7228047507149835, 4.206350428717477], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.11390264 0.
 0.         0.         0.14771084 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.30459244 0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.6028537  0.         0.00664133 0.01456194]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.11390263923892267,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.1477108425564236,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.30459244339554403,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.602853704381872,
      0.0,
      0.006641332749967222,
      0.014561941888597276
    ]
  },
  "8": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 0,
    "new_data_size": 1,
    "total_size": 1,
    "quality_scores": [
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_5.png

通信计算
传输时延: 1.22s
标注时延: 0.00s
训练时延: 0.60s
广播时延: 22.55s
通信时延: 24.37s
连续学习指标 (任务 3):
  AA: 0.2649   - 当前模型平均准确率
  AIA: 0.1905  - 平均增量准确率
  FM: -0.1214   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2222
  current_domain_loss: 3.3193
total_delay:24.36980981465002
global_dataset_size:1440
奖励计算 - 损失降幅: 48.5582, 奖励: 0.0014
数据异质性图已保存至./results/data_heterogeneity_session_5.png
Saved: session5_core_metrics_session5_20251211_150326.png
Saved: session5_accuracy_evolution_session5_20251211_150326.png
Saved: session5_sample_count_session5_20251211_150326.png
Saved: session5_communication_delay_session5_20251211_150326.png
Saved: session5_training_loss_session5_20251211_150326.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 7/30 ===
Session 6: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 60
上传批次: [5, 2, 5, 4, 3, 2, 4, 3, 0, 3, 1, 5, 4, 5, 5, 0, 1, 1, 3, 4]
带宽分配: [0.0087084  0.00723338 0.1435741  0.12697994 0.02006803 0.08143117
 0.01527453 0.00736953 0.         0.02104793 0.20822401 0.07217219
 0.01338858 0.03429834 0.06739766 0.         0.0127805  0.00368237
 0.09186811 0.0645012 ]
车辆 0 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 2 缓存维护: 移除了 4 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 3 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 4 缓存维护: 移除了 2 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 5 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 6 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 7 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 9 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 10 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 12 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 13 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 14 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 19 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次

缓存管理
当前缓存总批次: 95
缓存中新数据批次：60
缓存中旧数据批次：35
Epoch 1, train_loss: 7.1123, val_loss: 3.0203 *
Epoch 2, train_loss: 6.2573, val_loss: 3.0860, patience_counter/patience: 1/5
Epoch 3, train_loss: 5.9513, val_loss: 3.1892, patience_counter/patience: 2/5
Epoch 4, train_loss: 5.6663, val_loss: 3.2337, patience_counter/patience: 3/5
Epoch 5, train_loss: 5.4797, val_loss: 3.2388, patience_counter/patience: 4/5
Epoch 6, train_loss: 5.4007, val_loss: 3.1999, patience_counter/patience: 5/5
早停触发！在epoch 6停止
调试信息：
{'training_loss': 5.400747916572972, 'epoch_losses': [7.112270054064299, 6.257337615364476, 5.951272803858707, 5.66630230451885, 5.479698522467363, 5.400747916572972], 'val_losses': [3.0202808711263867, 3.0860080122947693, 3.1892091168297663, 3.233746177620358, 3.2387557095951505, 3.19990066687266], 'actual_epochs': 6, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.23874189 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.23280062 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.15330958 0.00388015 0.00439138 0.         0.0043236 ]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.2387418878705878,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.23280061797091836,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.15330958366394043,
      0.003880147557509573,
      0.004391384124755859,
      0.0,
      0.004323602977551912
    ]
  },
  "8": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 1,
    "new_data_size": 2,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_6.png

通信计算
传输时延: 8.23s
标注时延: 0.02s
训练时延: 0.55s
广播时延: 8.59s
通信时延: 17.39s
连续学习指标 (任务 1):
  AA: 0.2525   - 当前模型平均准确率
  AIA: 0.1993  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3179
  current_domain_loss: 2.8479
total_delay:17.3892541549063
global_dataset_size:1520
奖励计算 - 损失降幅: 321.5616, 奖励: 0.0122
数据异质性图已保存至./results/data_heterogeneity_session_6.png
Saved: session6_core_metrics_session6_20251211_150622.png
Saved: session6_accuracy_evolution_session6_20251211_150622.png
Saved: session6_sample_count_session6_20251211_150622.png
Saved: session6_communication_delay_session6_20251211_150622.png
Saved: session6_training_loss_session6_20251211_150622.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 8/30 ===
Session 7: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 12
上传批次: [1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 1, 1]
带宽分配: [0.02275609 0.         0.06262076 0.03624589 0.         0.
 0.02247612 0.         0.01104084 0.05163454 0.         0.
 0.0370363  0.27341907 0.01780805 0.         0.         0.
 0.22061968 0.24434268]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 2 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 12 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 14 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 96
缓存中新数据批次：12
缓存中旧数据批次：84
Epoch 1, train_loss: 6.4448, val_loss: 2.9801 *
Epoch 2, train_loss: 5.9609, val_loss: 2.7306 *
Epoch 3, train_loss: 5.6122, val_loss: 2.9950, patience_counter/patience: 1/5
Epoch 4, train_loss: 5.4359, val_loss: 2.9301, patience_counter/patience: 2/5
Epoch 5, train_loss: 5.3872, val_loss: 2.7935, patience_counter/patience: 3/5
Epoch 6, train_loss: 5.2753, val_loss: 2.7658, patience_counter/patience: 4/5
Epoch 7, train_loss: 4.9694, val_loss: 3.3847, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 4.969360267122586, 'epoch_losses': [6.444842725992203, 5.960863530635834, 5.612167462706566, 5.435941050450007, 5.387200350562732, 5.275346388419469, 4.969360267122586], 'val_losses': [2.980098009109497, 2.7306038618087767, 2.9950091361999513, 2.9301345348358154, 2.793492865562439, 2.7658403873443604, 3.3846685171127318], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.30796448 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.20252782 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.06183384
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.07785427 0.
 0.         0.44862717 0.00307614 0.00850288 0.         0.01581031]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.3079644814133644,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.2025278243753645,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.06183383986353874
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.07785427218510045,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.44862717265884083,
      0.0030761363191737067,
      0.008502881353100141,
      0.0,
      0.01581031249629127
    ]
  },
  "8": {
    "old_data_size": 3,
    "new_data_size": 1,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_7.png

通信计算
传输时延: 1.30s
标注时延: 0.00s
训练时延: 0.65s
广播时延: 4.15s
通信时延: 6.10s
连续学习指标 (任务 2):
  AA: 0.2476   - 当前模型平均准确率
  AIA: 0.2054  - 平均增量准确率
  FM: -0.1474   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3019
  current_domain_loss: 2.4371
total_delay:6.098977209761186
global_dataset_size:1536
奖励计算 - 损失降幅: 221.8341, 奖励: 0.0237
数据异质性图已保存至./results/data_heterogeneity_session_7.png
Saved: session7_core_metrics_session7_20251211_150914.png
Saved: session7_accuracy_evolution_session7_20251211_150914.png
Saved: session7_sample_count_session7_20251211_150914.png
Saved: session7_communication_delay_session7_20251211_150914.png
Saved: session7_training_loss_session7_20251211_150914.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 9/30 ===
Session 8: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 3
上传批次: [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]
带宽分配: [3.45648223e-16 0.00000000e+00 0.00000000e+00 0.00000000e+00
 3.91217564e-01 0.00000000e+00 0.00000000e+00 0.00000000e+00
 2.36002387e-01 0.00000000e+00 0.00000000e+00 3.72780050e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 97
缓存中新数据批次：3
缓存中旧数据批次：94
Epoch 1, train_loss: 5.6222, val_loss: 3.6073 *
Epoch 2, train_loss: 5.4658, val_loss: 3.5997 *
Epoch 3, train_loss: 5.3928, val_loss: 3.8563, patience_counter/patience: 1/5
Epoch 4, train_loss: 5.0686, val_loss: 4.0000, patience_counter/patience: 2/5
Epoch 5, train_loss: 4.8730, val_loss: 3.7489, patience_counter/patience: 3/5
Epoch 6, train_loss: 4.9314, val_loss: 4.7990, patience_counter/patience: 4/5
Epoch 7, train_loss: 4.7536, val_loss: 4.3666, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 4.753626204028572, 'epoch_losses': [5.6221990978594905, 5.465792867326245, 5.392772104322296, 5.068602935555055, 4.872959820265622, 4.931370307489769, 4.753626204028572], 'val_losses': [3.607285874230521, 3.599736758640834, 3.8562637737819125, 3.999974046434675, 3.748877695628575, 4.799015522003174, 4.366609811782837], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.13535468 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.95736673 0.         0.         0.         0.         0.
 0.         0.03441002 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.09811417
 0.         0.         0.01654538 0.         0.05795692 0.
 0.0128622 ]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.1353546766071385,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.9573667266524536
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 0,
    "total_size": 4,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.03441001705287658,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.09811416524382392,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.016545383586097008,
      0.0,
      0.05795692414352574,
      0.0,
      0.01286219567367711
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 3,
    "new_data_size": 0,
    "total_size": 3,
    "quality_scores": [
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_8.png

通信计算
传输时延: 0.10s
标注时延: 0.00s
训练时延: 0.65s
广播时延: 4.90s
通信时延: 5.65s
连续学习指标 (任务 3):
  AA: 0.2860   - 当前模型平均准确率
  AIA: 0.2143  - 平均增量准确率
  FM: -0.1734   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.1818
  current_domain_loss: 3.5904
total_delay:5.651359348868527
global_dataset_size:1552
奖励计算 - 损失降幅: 1.7527, 奖励: 0.0002
数据异质性图已保存至./results/data_heterogeneity_session_8.png
Saved: session8_core_metrics_session8_20251211_151228.png
Saved: session8_accuracy_evolution_session8_20251211_151228.png
Saved: session8_sample_count_session8_20251211_151228.png
Saved: session8_communication_delay_session8_20251211_151228.png
Saved: session8_training_loss_session8_20251211_151228.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 10/30 ===
Session 9: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 43
上传批次: [2, 3, 2, 3, 1, 0, 2, 0, 5, 5, 3, 0, 2, 2, 2, 1, 0, 2, 4, 4]
带宽分配: [0.02023424 0.08690386 0.01685526 0.02647336 0.0063285  0.
 0.11518053 0.         0.02854526 0.04084212 0.40731165 0.
 0.00528632 0.04274728 0.09605407 0.00673811 0.         0.00680182
 0.03044956 0.06324806]
车辆 0 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 1 缓存维护: 移除了 1 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 2 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 3 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 8 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 9 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 10 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 12 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 13 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 14 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 17 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 18 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 19 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：43
缓存中旧数据批次：57
Epoch 1, train_loss: 5.9195, val_loss: 3.1221 *
Epoch 2, train_loss: 5.3333, val_loss: 2.9411 *
Epoch 3, train_loss: 5.0007, val_loss: 3.1963, patience_counter/patience: 1/5
Epoch 4, train_loss: 4.9784, val_loss: 3.0771, patience_counter/patience: 2/5
Epoch 5, train_loss: 4.8220, val_loss: 3.1532, patience_counter/patience: 3/5
Epoch 6, train_loss: 4.6961, val_loss: 3.2720, patience_counter/patience: 4/5
Epoch 7, train_loss: 4.5594, val_loss: 3.1421, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 4.559376385211944, 'epoch_losses': [5.919476680755615, 5.333268609046936, 5.00070285320282, 4.978441662788391, 4.822037525177002, 4.696134586334228, 4.559376385211944], 'val_losses': [3.1221295264032154, 2.941077172756195, 3.1963383654753366, 3.077139370971256, 3.153218683269289, 3.272032310565313, 3.1420805056889853], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.34335764 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.09337868 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.61883279 0.         0.01291317]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.3433576361338298,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.6188327924410503,
      0.0,
      0.01291317065556844
    ]
  },
  "8": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.09337867736816406,
      0.0
    ]
  },
  "1": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_9.png

通信计算
传输时延: 4.16s
标注时延: 0.01s
训练时延: 0.67s
广播时延: 5.15s
通信时延: 9.99s
连续学习指标 (任务 1):
  AA: 0.2604   - 当前模型平均准确率
  AIA: 0.2189  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3393
  current_domain_loss: 2.6612
total_delay:9.99271329508715
global_dataset_size:1600
奖励计算 - 损失降幅: 250.0023, 奖励: 0.0156
数据异质性图已保存至./results/data_heterogeneity_session_9.png
Saved: session9_core_metrics_session9_20251211_151547.png
Saved: session9_accuracy_evolution_session9_20251211_151547.png
Saved: session9_sample_count_session9_20251211_151547.png
Saved: session9_communication_delay_session9_20251211_151547.png
Saved: session9_training_loss_session9_20251211_151547.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 11/30 ===
Session 10: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 12
上传批次: [0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1]
带宽分配: [3.69319371e-16 2.02201614e-01 0.00000000e+00 2.55866167e-02
 2.50814976e-02 9.03912712e-02 0.00000000e+00 0.00000000e+00
 0.00000000e+00 4.24279097e-02 0.00000000e+00 1.72869317e-01
 2.26695913e-02 7.86456126e-02 1.63561947e-01 2.69464171e-02
 5.64504845e-02 0.00000000e+00 0.00000000e+00 9.31677216e-02]
车辆 1 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 12 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 14 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：12
缓存中旧数据批次：88
Epoch 1, train_loss: 5.1795, val_loss: 2.7089 *
Epoch 2, train_loss: 4.9277, val_loss: 3.0424, patience_counter/patience: 1/5
Epoch 3, train_loss: 4.6417, val_loss: 3.2103, patience_counter/patience: 2/5
Epoch 4, train_loss: 4.6681, val_loss: 2.8019, patience_counter/patience: 3/5
Epoch 5, train_loss: 4.5355, val_loss: 3.1879, patience_counter/patience: 4/5
Epoch 6, train_loss: 4.4779, val_loss: 3.1517, patience_counter/patience: 5/5
早停触发！在epoch 6停止
调试信息：
{'training_loss': 4.477929837703705, 'epoch_losses': [5.179462285041809, 4.9277011680603025, 4.641677942276001, 4.66814163684845, 4.535495719909668, 4.477929837703705], 'val_losses': [2.708898091316223, 3.042407178878784, 3.2103322744369507, 2.8019282579422, 3.1878540873527528, 3.1517076015472414], 'actual_epochs': 6, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.66921009 0.         0.         0.         0.0213883
 0.         0.0092879  0.         0.00634598]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.6692100882530212,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.021388304233551026,
      0.0,
      0.009287896156311036,
      0.0,
      0.0063459789752960205
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_10.png

通信计算
传输时延: 0.94s
标注时延: 0.00s
训练时延: 0.58s
广播时延: 3.51s
通信时延: 5.02s
连续学习指标 (任务 2):
  AA: 0.2717   - 当前模型平均准确率
  AIA: 0.2237  - 平均增量准确率
  FM: -0.1741   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2767
  current_domain_loss: 2.7078
total_delay:5.024896675649361
global_dataset_size:1600
奖励计算 - 损失降幅: 49.4754, 奖励: 0.0062
数据异质性图已保存至./results/data_heterogeneity_session_10.png
Saved: session10_core_metrics_session10_20251211_151819.png
Saved: session10_accuracy_evolution_session10_20251211_151819.png
Saved: session10_sample_count_session10_20251211_151819.png
Saved: session10_communication_delay_session10_20251211_151819.png
Saved: session10_training_loss_session10_20251211_151819.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 12/30 ===
Session 11: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 3
上传批次: [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0]
带宽分配: [0.         0.3156719  0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.4107181  0.         0.27361001 0.         0.
 0.         0.        ]
车辆 1 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：3
缓存中旧数据批次：97
Epoch 1, train_loss: 4.9768, val_loss: 4.5769 *
Epoch 2, train_loss: 4.8551, val_loss: 5.4806, patience_counter/patience: 1/5
Epoch 3, train_loss: 4.7008, val_loss: 5.0311, patience_counter/patience: 2/5
Epoch 4, train_loss: 4.4942, val_loss: 3.0546 *
Epoch 5, train_loss: 4.3097, val_loss: 4.3337, patience_counter/patience: 1/5
Epoch 6, train_loss: 4.2159, val_loss: 5.6561, patience_counter/patience: 2/5
Epoch 7, train_loss: 4.1146, val_loss: 4.9321, patience_counter/patience: 3/5
Epoch 8, train_loss: 4.0195, val_loss: 3.7473, patience_counter/patience: 4/5
Epoch 9, train_loss: 3.9545, val_loss: 4.1090, patience_counter/patience: 5/5
早停触发！在epoch 9停止
调试信息：
{'training_loss': 3.954460701942444, 'epoch_losses': [4.9767689561843875, 4.85510136604309, 4.700818486213684, 4.494235205650329, 4.3097159290313725, 4.215938601493836, 4.114561958312988, 4.019496986865997, 3.954460701942444], 'val_losses': [4.5769166605813165, 5.480603490556989, 5.031072344098773, 3.0545564719608853, 4.333694798605783, 5.656114986964634, 4.932103565761021, 3.747300931385585, 4.109044279370989], 'actual_epochs': 9, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.13868068 0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.22796459 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.34522285 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         1.33879521 0.         0.         0.         0.
 0.         0.03866935 0.0081865  0.07517773]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.13868068265914915,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.22796458530426025
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.345222847700119,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      1.3387952070236206,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.03866934585571289,
      0.00818649983406067,
      0.0751777310371399
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_11.png

通信计算
传输时延: 0.78s
标注时延: 0.00s
训练时延: 0.86s
广播时延: 7.96s
通信时延: 9.60s
连续学习指标 (任务 3):
  AA: 0.3305   - 当前模型平均准确率
  AIA: 0.2326  - 平均增量准确率
  FM: -0.2048   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2525
  current_domain_loss: 3.0982
total_delay:9.595990770906937
global_dataset_size:1600
奖励计算 - 损失降幅: 41.7512, 奖励: 0.0027
数据异质性图已保存至./results/data_heterogeneity_session_11.png
Saved: session11_core_metrics_session11_20251211_152222.png
Saved: session11_accuracy_evolution_session11_20251211_152222.png
Saved: session11_sample_count_session11_20251211_152222.png
Saved: session11_communication_delay_session11_20251211_152222.png
Saved: session11_training_loss_session11_20251211_152222.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 13/30 ===
Session 12: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 43
上传批次: [0, 1, 5, 3, 1, 4, 1, 1, 3, 4, 3, 3, 3, 0, 3, 0, 3, 1, 1, 3]
带宽分配: [0.         0.01733009 0.20020409 0.03770088 0.00642637 0.04233234
 0.01053453 0.00404382 0.01790062 0.0680515  0.03734232 0.03162805
 0.00666976 0.         0.05110288 0.         0.03250796 0.00750842
 0.12579547 0.3029209 ]
车辆 1 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 2 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 3 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 6 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 7 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 9 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 10 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 11 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 12 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 14 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 16 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 17 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：43
缓存中旧数据批次：57
Epoch 1, train_loss: 5.0296, val_loss: 3.0969 *
Epoch 2, train_loss: 4.6399, val_loss: 3.2164, patience_counter/patience: 1/5
Epoch 3, train_loss: 4.3206, val_loss: 3.0663 *
Epoch 4, train_loss: 4.0921, val_loss: 3.1920, patience_counter/patience: 1/5
Epoch 5, train_loss: 3.9446, val_loss: 3.2723, patience_counter/patience: 2/5
Epoch 6, train_loss: 3.9424, val_loss: 3.0901, patience_counter/patience: 3/5
Epoch 7, train_loss: 3.9971, val_loss: 3.2825, patience_counter/patience: 4/5
Epoch 8, train_loss: 3.7845, val_loss: 3.1970, patience_counter/patience: 5/5
早停触发！在epoch 8停止
调试信息：
{'training_loss': 3.7845082759857176, 'epoch_losses': [5.029613614082336, 4.639931216239929, 4.320589079856872, 4.092070374488831, 3.944623327255249, 3.9423950123786926, 3.9970821809768675, 3.7845082759857176], 'val_losses': [3.0969498025046454, 3.216356588734521, 3.066348579194811, 3.192017442650265, 3.272310349676344, 3.0901264713870153, 3.28246099419064, 3.1969581180148654], 'actual_epochs': 8, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.12960121 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.17363075 0.         0.
 0.         0.         0.13444622 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.2415058  0.
 0.         0.         0.         0.0264436  0.         0.02957288
 0.         0.03921942 0.         0.         0.         0.
 0.         0.04248182 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.06529195
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.10717294 0.21100189 0.         0.0074408
 0.         0.         0.01574723 0.         0.         0.
 0.         0.         0.         0.         0.         0.11800345
 0.00537872 0.00440484 0.00269455 0.01945481]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.1736307454109192,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.13444622308015824,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.02644360363483429,
      0.0,
      0.02957287833094597,
      0.0,
      0.039219420477747916
    ]
  },
  "10": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0424818217754364,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.06529194921255112,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.10717293620109558,
      0.21100188687443733,
      0.0,
      0.007440798878669739,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.01574723273515701,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.11800345182418823,
      0.005378721654415131,
      0.004404841661453247,
      0.0026945534348487856,
      0.019454810991883276
    ]
  },
  "8": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.24150579512119294,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.12960120677947998,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_12.png

通信计算
传输时延: 3.13s
标注时延: 0.01s
训练时延: 0.77s
广播时延: 4.50s
通信时延: 8.41s
连续学习指标 (任务 1):
  AA: 0.2726   - 当前模型平均准确率
  AIA: 0.2357  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3517
  current_domain_loss: 2.8412
total_delay:8.411901021970454
global_dataset_size:1600
奖励计算 - 损失降幅: 484.6531, 奖励: 0.0360
数据异质性图已保存至./results/data_heterogeneity_session_12.png
Saved: session12_core_metrics_session12_20251211_152611.png
Saved: session12_accuracy_evolution_session12_20251211_152611.png
Saved: session12_sample_count_session12_20251211_152611.png
Saved: session12_communication_delay_session12_20251211_152611.png
Saved: session12_training_loss_session12_20251211_152611.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 14/30 ===
Session 13: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 8
上传批次: [0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1]
带宽分配: [1.80696757e-14 1.54568118e-23 0.00000000e+00 0.00000000e+00
 3.65735733e-03 3.86763177e-01 0.00000000e+00 0.00000000e+00
 0.00000000e+00 1.52004315e-02 1.43138791e-02 1.23578160e-02
 0.00000000e+00 0.00000000e+00 0.00000000e+00 5.30794987e-03
 0.00000000e+00 0.00000000e+00 5.29290368e-01 3.31090213e-02]
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：8
缓存中旧数据批次：92
Epoch 1, train_loss: 4.2420, val_loss: 2.8718 *
Epoch 2, train_loss: 4.2776, val_loss: 2.8313 *
Epoch 3, train_loss: 4.0207, val_loss: 2.7311 *
Epoch 4, train_loss: 3.8212, val_loss: 2.7515, patience_counter/patience: 1/5
Epoch 5, train_loss: 3.7043, val_loss: 2.6683 *
Epoch 6, train_loss: 3.7107, val_loss: 2.7957, patience_counter/patience: 1/5
Epoch 7, train_loss: 3.7333, val_loss: 2.8580, patience_counter/patience: 2/5
Epoch 8, train_loss: 3.8051, val_loss: 2.6283 *
Epoch 9, train_loss: 3.5312, val_loss: 2.4921 *
Epoch 10, train_loss: 3.3634, val_loss: 2.4417 *
Epoch 11, train_loss: 3.1871, val_loss: 2.5315, patience_counter/patience: 1/5
Epoch 12, train_loss: 3.0940, val_loss: 2.5648, patience_counter/patience: 2/5
Epoch 13, train_loss: 3.1008, val_loss: 2.8688, patience_counter/patience: 3/5
Epoch 14, train_loss: 3.4585, val_loss: 3.5223, patience_counter/patience: 4/5
Epoch 15, train_loss: 3.4380, val_loss: 3.0311, patience_counter/patience: 5/5
早停触发！在epoch 15停止
调试信息：
{'training_loss': 3.43795191526413, 'epoch_losses': [4.2420256185531615, 4.277552146911621, 4.020713188648224, 3.8211786937713623, 3.704268789291382, 3.7106606459617613, 3.7332692623138426, 3.8050658464431764, 3.5311870121955873, 3.3634491777420044, 3.187141320705414, 3.0940384387969972, 3.1008479022979736, 3.458517863750458, 3.43795191526413], 'val_losses': [2.8718472480773927, 2.831283378601074, 2.7310935258865356, 2.7514846205711363, 2.66826753616333, 2.7957270860672, 2.858046865463257, 2.628270924091339, 2.492057514190674, 2.441724395751953, 2.531536567211151, 2.56477632522583, 2.8688122510910032, 3.5223234415054323, 3.031086492538452], 'actual_epochs': 15, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.47766594 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.90234502 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         3.10015174 0.         0.0135225
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.29414459
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.39388875 0.06997744 0.00495636]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.9023450183868408,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      3.1001517360860653
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.01352250099182129,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.2941445941274816,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.3938887544111772,
      0.06997743763706901,
      0.004956362640315836
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.47766593976454297,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_13.png

通信计算
传输时延: 26.96s
标注时延: 0.00s
训练时延: 1.44s
广播时延: 38.26s
通信时延: 66.66s
连续学习指标 (任务 2):
  AA: 0.3626   - 当前模型平均准确率
  AIA: 0.2448  - 平均增量准确率
  FM: -0.1936   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.4088
  current_domain_loss: 2.5350
total_delay:66.66404244377784
global_dataset_size:1600
奖励计算 - 损失降幅: 139.2091, 奖励: 0.0013
数据异质性图已保存至./results/data_heterogeneity_session_13.png
Saved: session13_core_metrics_session13_20251211_153254.png
Saved: session13_accuracy_evolution_session13_20251211_153254.png
Saved: session13_sample_count_session13_20251211_153254.png
Saved: session13_communication_delay_session13_20251211_153254.png
Saved: session13_training_loss_session13_20251211_153254.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 15/30 ===
Session 14: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 2
上传批次: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]
带宽分配: [1.15903450e-15 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 3.22710168e-01 0.00000000e+00 0.00000000e+00 6.77289832e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：2
缓存中旧数据批次：98
Epoch 1, train_loss: 3.3446, val_loss: 3.6640 *
Epoch 2, train_loss: 3.2100, val_loss: 3.6773, patience_counter/patience: 1/5
Epoch 3, train_loss: 3.1187, val_loss: 3.5309 *
Epoch 4, train_loss: 3.3573, val_loss: 3.4871 *
Epoch 5, train_loss: 3.6525, val_loss: 4.5446, patience_counter/patience: 1/5
Epoch 6, train_loss: 3.5257, val_loss: 3.2484 *
Epoch 7, train_loss: 3.1376, val_loss: 3.7182, patience_counter/patience: 1/5
Epoch 8, train_loss: 2.8436, val_loss: 3.5516, patience_counter/patience: 2/5
Epoch 9, train_loss: 2.6117, val_loss: 3.1160 *
Epoch 10, train_loss: 2.4022, val_loss: 3.2364, patience_counter/patience: 1/5
Epoch 11, train_loss: 2.2198, val_loss: 3.2522, patience_counter/patience: 2/5
Epoch 12, train_loss: 2.0762, val_loss: 3.2609, patience_counter/patience: 3/5
Epoch 13, train_loss: 1.9616, val_loss: 3.2537, patience_counter/patience: 4/5
Epoch 14, train_loss: 1.8717, val_loss: 3.2786, patience_counter/patience: 5/5
早停触发！在epoch 14停止
调试信息：
{'training_loss': 1.8716743540763856, 'epoch_losses': [3.344567983150482, 3.2099988770484926, 3.1186605095863342, 3.3572665095329284, 3.6525435209274293, 3.5256899428367614, 3.1375896954536437, 2.8436453580856322, 2.611717872619629, 2.40221200466156, 2.2198363018035887, 2.0762056612968447, 1.9616413390636445, 1.8716743540763856], 'val_losses': [3.6639543090547835, 3.677255289895194, 3.5308644686426436, 3.487055948802403, 4.544631838798523, 3.2484058822904314, 3.7181533064161028, 3.5516365425927297, 3.1160296882901872, 3.2364166293825423, 3.252211468560355, 3.26089186327798, 3.2536635398864746, 3.278618948800223], 'actual_epochs': 14, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.81557625 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.05797542 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         1.17679364 0.         0.         0.11539524
 0.         0.00470945 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.0392552
 0.         0.         0.         0.         0.         0.
 0.         0.         0.0427979  1.07057155 0.         0.00337705
 0.         0.         0.         0.00370047 0.         0.
 0.08649653 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.20768904 0.         0.0104318 ]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.057975415289402005,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.115395236492157,
      0.0,
      0.004709447741508484
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.039255198955535885
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0427978980243206,
      1.0705715475082398
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0033770508170127868,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.003700465887784958,
      0.0,
      0.0,
      0.0864965271949768,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.20768904349207876,
      0.0,
      0.010431804060935974
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      1.1767936438322066
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.8155762515068053,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_14.png

通信计算
传输时延: 0.21s
标注时延: 0.00s
训练时延: 1.34s
广播时延: 11.70s
通信时延: 13.26s
连续学习指标 (任务 3):
  AA: 0.4136   - 当前模型平均准确率
  AIA: 0.2560  - 平均增量准确率
  FM: -0.3092   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2929
  current_domain_loss: 3.2361
total_delay:13.256396372397587
global_dataset_size:1600
奖励计算 - 损失降幅: 35.3658, 奖励: 0.0017
数据异质性图已保存至./results/data_heterogeneity_session_14.png
Saved: session14_core_metrics_session14_20251211_153905.png
Saved: session14_accuracy_evolution_session14_20251211_153905.png
Saved: session14_sample_count_session14_20251211_153905.png
Saved: session14_communication_delay_session14_20251211_153905.png
Saved: session14_training_loss_session14_20251211_153905.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 16/30 ===
Session 15: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 45
上传批次: [1, 3, 1, 4, 3, 3, 0, 0, 1, 1, 2, 5, 5, 4, 0, 2, 5, 2, 0, 3]
带宽分配: [0.03478279 0.04543872 0.00347875 0.00452593 0.00482998 0.03561117
 0.         0.         0.00201955 0.00202029 0.00244249 0.07272156
 0.00292792 0.01673351 0.         0.09564788 0.61002988 0.0034059
 0.         0.06338369]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 1 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 2 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 4 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 5 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 11 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 12 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 13 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 15 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 16 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 17 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 19 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：45
缓存中旧数据批次：55
Epoch 1, train_loss: 4.6826, val_loss: 3.4720 *
Epoch 2, train_loss: 4.6529, val_loss: 3.0602 *
Epoch 3, train_loss: 3.8174, val_loss: 2.9662 *
Epoch 4, train_loss: 3.4073, val_loss: 2.8958 *
Epoch 5, train_loss: 3.2055, val_loss: 3.0712, patience_counter/patience: 1/5
Epoch 6, train_loss: 3.1126, val_loss: 3.0748, patience_counter/patience: 2/5
Epoch 7, train_loss: 3.0363, val_loss: 3.1554, patience_counter/patience: 3/5
Epoch 8, train_loss: 3.1361, val_loss: 3.1771, patience_counter/patience: 4/5
Epoch 9, train_loss: 3.1103, val_loss: 2.9636, patience_counter/patience: 5/5
早停触发！在epoch 9停止
调试信息：
{'training_loss': 3.110297999382019, 'epoch_losses': [4.6825656747818, 4.6528518104553225, 3.8173681187629698, 3.407292215824127, 3.2054747438430784, 3.1126336789131166, 3.036256811618805, 3.1361313915252684, 3.110297999382019], 'val_losses': [3.4720092018445334, 3.0601692928208246, 2.9662305812040963, 2.8958416846063404, 3.071199999915229, 3.074793017572827, 3.155374844868978, 3.1771483454439373, 2.9636489119794636], 'actual_epochs': 9, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         1.69822805
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.18289744 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.18768745 0.
 0.         0.02989824 0.         0.07909515]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      1.6982280473709108,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.1828974437713623
    ]
  },
  "16": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.18768744707107543
    ]
  },
  "19": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.029898237884044648,
      0.0,
      0.0790951526761055
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_15.png

通信计算
传输时延: 9.52s
标注时延: 0.01s
训练时延: 0.86s
广播时延: 8.33s
通信时延: 18.72s
连续学习指标 (任务 1):
  AA: 0.3170   - 当前模型平均准确率
  AIA: 0.2598  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3943
  current_domain_loss: 2.6906
total_delay:18.723605352925997
global_dataset_size:1600
奖励计算 - 损失降幅: 187.1396, 奖励: 0.0062
数据异质性图已保存至./results/data_heterogeneity_session_15.png
Saved: session15_core_metrics_session15_20251211_154326.png
Saved: session15_accuracy_evolution_session15_20251211_154326.png
Saved: session15_sample_count_session15_20251211_154326.png
Saved: session15_communication_delay_session15_20251211_154326.png
Saved: session15_training_loss_session15_20251211_154326.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 17/30 ===
Session 16: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 11
上传批次: [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 2, 0, 1, 1, 1, 1, 1]
带宽分配: [0.02469174 0.         0.         0.01648735 0.         0.
 0.07888536 0.         0.         0.22462608 0.         0.
 0.         0.07890679 0.         0.16479161 0.0589383  0.03067005
 0.09654344 0.22545927]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 17 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：11
缓存中旧数据批次：89
Epoch 1, train_loss: 3.4199, val_loss: 2.4435 *
Epoch 2, train_loss: 3.3704, val_loss: 2.6198, patience_counter/patience: 1/5
Epoch 3, train_loss: 3.1167, val_loss: 2.3294 *
Epoch 4, train_loss: 2.9139, val_loss: 2.4534, patience_counter/patience: 1/5
Epoch 5, train_loss: 2.7971, val_loss: 2.3936, patience_counter/patience: 2/5
Epoch 6, train_loss: 2.7029, val_loss: 2.6286, patience_counter/patience: 3/5
Epoch 7, train_loss: 3.0106, val_loss: 3.1943, patience_counter/patience: 4/5
Epoch 8, train_loss: 3.3302, val_loss: 2.7270, patience_counter/patience: 5/5
早停触发！在epoch 8停止
调试信息：
{'training_loss': 3.3302147722244264, 'epoch_losses': [3.4199284410476682, 3.3704297852516176, 3.116685130596161, 2.913872971534729, 2.7970894265174864, 2.702924921512604, 3.0105673694610595, 3.3302147722244264], 'val_losses': [2.4434756875038146, 2.6198189496994018, 2.329382061958313, 2.4534005165100097, 2.3935837268829347, 2.628588080406189, 3.194325566291809, 2.7270227670669556], 'actual_epochs': 8, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.03969837
 0.         0.         0.01010644 0.00336372 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         1.25955715
 0.         0.         0.00927518 0.00376872 0.00373173 0.01431383
 0.         0.         0.05963319 0.00328721]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.039698368795216085,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.010106439739465713,
      0.0033637198805809023,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      1.2595571506023406
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.00927518293261528,
      0.0037687185406684877,
      0.003731728419661522
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.014313829690217971,
      0.0,
      0.0,
      0.05963318586349487,
      0.0032872141152620314
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_16.png

通信计算
传输时延: 1.05s
标注时延: 0.00s
训练时延: 0.77s
广播时延: 11.49s
通信时延: 13.32s
连续学习指标 (任务 2):
  AA: 0.3570   - 当前模型平均准确率
  AIA: 0.2656  - 平均增量准确率
  FM: -0.2487   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3774
  current_domain_loss: 2.3279
total_delay:13.316827922000094
global_dataset_size:1600
奖励计算 - 损失降幅: 257.2078, 奖励: 0.0121
数据异质性图已保存至./results/data_heterogeneity_session_16.png
Saved: session16_core_metrics_session16_20251211_154706.png
Saved: session16_accuracy_evolution_session16_20251211_154706.png
Saved: session16_sample_count_session16_20251211_154706.png
Saved: session16_communication_delay_session16_20251211_154706.png
Saved: session16_training_loss_session16_20251211_154706.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 18/30 ===
Session 17: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 4
上传批次: [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0]
带宽分配: [2.46257530e-16 0.00000000e+00 0.00000000e+00 3.25735276e-17
 6.21829689e-02 0.00000000e+00 7.47270880e-17 7.47270880e-17
 7.47270880e-17 7.47270880e-17 0.00000000e+00 4.45632272e-01
 0.00000000e+00 2.29536561e-02 0.00000000e+00 4.69231103e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：4
缓存中旧数据批次：96
Epoch 1, train_loss: 3.0667, val_loss: 3.1201 *
Epoch 2, train_loss: 2.9133, val_loss: 2.8155 *
Epoch 3, train_loss: 2.7711, val_loss: 3.1945, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.6662, val_loss: 3.0829, patience_counter/patience: 2/5
Epoch 5, train_loss: 2.5701, val_loss: 3.2140, patience_counter/patience: 3/5
Epoch 6, train_loss: 2.6357, val_loss: 3.0930, patience_counter/patience: 4/5
Epoch 7, train_loss: 3.1151, val_loss: 3.2795, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 3.1150866508483888, 'epoch_losses': [3.0667186737060548, 2.9132698225975036, 2.7711340856552122, 2.666166851520538, 2.570131733417511, 2.635719134807587, 3.1150866508483888], 'val_losses': [3.12012665612357, 2.8154589789254323, 3.1945130143846785, 3.082861610821315, 3.214035613196237, 3.093020353998457, 3.2794787883758545], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.14289192 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.261516
 0.         0.         0.         0.26529797 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.05414899 0.         0.         0.         0.         0.
 0.10287092 0.         0.03329601 0.00230382]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.1428919235865275
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.26151599764823913,
      0.0,
      0.0,
      0.0,
      0.26529797236124675
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.05414899259805679,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.10287092328071594,
      0.0,
      0.03329601089159648,
      0.0023038241267204283
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_17.png

通信计算
传输时延: 0.86s
标注时延: 0.00s
训练时延: 0.67s
广播时延: 8.93s
通信时延: 10.46s
连续学习指标 (任务 3):
  AA: 0.3569   - 当前模型平均准确率
  AIA: 0.2706  - 平均增量准确率
  FM: -0.2595   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2222
  current_domain_loss: 3.2368
total_delay:10.464268551208312
global_dataset_size:1600
奖励计算 - 损失降幅: 37.7316, 奖励: 0.0023
数据异质性图已保存至./results/data_heterogeneity_session_17.png
Saved: session17_core_metrics_session17_20251211_155010.png
Saved: session17_accuracy_evolution_session17_20251211_155010.png
Saved: session17_sample_count_session17_20251211_155010.png
Saved: session17_communication_delay_session17_20251211_155010.png
Saved: session17_training_loss_session17_20251211_155010.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 19/30 ===
Session 18: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 51
上传批次: [5, 2, 3, 2, 4, 1, 3, 2, 4, 0, 1, 3, 4, 4, 3, 1, 3, 0, 3, 3]
带宽分配: [0.25110928 0.05867933 0.01861858 0.00297296 0.02623686 0.07276224
 0.02299122 0.00252197 0.16995892 0.         0.00226741 0.07831096
 0.00309184 0.01255616 0.024546   0.00790802 0.10733984 0.
 0.04277622 0.09535219]
车辆 0 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 1 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 2 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 3 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 4 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 7 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 8 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 10 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 12 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 13 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 14 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 16 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 18 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 19 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：51
缓存中旧数据批次：49
Epoch 1, train_loss: 3.7498, val_loss: 3.2439 *
Epoch 2, train_loss: 3.6199, val_loss: 2.7559 *
Epoch 3, train_loss: 3.1875, val_loss: 2.8261, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.8623, val_loss: 2.8450, patience_counter/patience: 2/5
Epoch 5, train_loss: 2.6596, val_loss: 2.8363, patience_counter/patience: 3/5
Epoch 6, train_loss: 2.5131, val_loss: 2.7526 *
Epoch 7, train_loss: 2.4107, val_loss: 2.8403, patience_counter/patience: 1/5
Epoch 8, train_loss: 2.3275, val_loss: 2.7509 *
Epoch 9, train_loss: 2.3129, val_loss: 2.8823, patience_counter/patience: 1/5
Epoch 10, train_loss: 3.0097, val_loss: 3.7647, patience_counter/patience: 2/5
Epoch 11, train_loss: 3.7072, val_loss: 2.9681, patience_counter/patience: 3/5
Epoch 12, train_loss: 3.0803, val_loss: 2.7567, patience_counter/patience: 4/5
Epoch 13, train_loss: 2.6994, val_loss: 2.7471 *
Epoch 14, train_loss: 2.4378, val_loss: 2.6127 *
Epoch 15, train_loss: 2.2381, val_loss: 2.5723 *
Epoch 16, train_loss: 2.0909, val_loss: 2.5317 *
Epoch 17, train_loss: 1.9844, val_loss: 2.5161 *
Epoch 18, train_loss: 1.8974, val_loss: 2.5187, patience_counter/patience: 1/5
Epoch 19, train_loss: 1.8246, val_loss: 2.5173, patience_counter/patience: 2/5
Epoch 20, train_loss: 1.7621, val_loss: 2.5392, patience_counter/patience: 3/5
Epoch 21, train_loss: 1.7081, val_loss: 2.5705, patience_counter/patience: 4/5
Epoch 22, train_loss: 1.6609, val_loss: 2.6194, patience_counter/patience: 5/5
早停触发！在epoch 22停止
调试信息：
{'training_loss': 1.6608730912208558, 'epoch_losses': [3.7498019790649413, 3.6199031710624694, 3.1875151014328003, 2.8623113083839415, 2.659647161960602, 2.5130645036697388, 2.4107200956344603, 2.3274789094924926, 2.3129199600219725, 3.009707233905792, 3.707231435775757, 3.080267310142517, 2.6993501019477844, 2.4377626943588258, 2.2381188893318176, 2.090897694826126, 1.9843809974193574, 1.8974274539947509, 1.8246002829074859, 1.7620509445667267, 1.7080752992630004, 1.6608730912208558], 'val_losses': [3.243883020348019, 2.7559034989939795, 2.8260994222429066, 2.844960351785024, 2.8363307449552746, 2.75259812341796, 2.840288963582781, 2.7508703569571176, 2.8823005755742392, 3.7647108170721264, 2.9680586457252502, 2.7566588719685874, 2.747082551320394, 2.6127085751957364, 2.5723292330900827, 2.5317011574904122, 2.5160966681109533, 2.518709328439501, 2.517274740669462, 2.539155615700616, 2.570460961924659, 2.619439274072647], 'actual_epochs': 22, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 6.65623045e-02 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 5.09876436e+00 0.00000000e+00 1.42009424e-02
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 9.97006077e-02 0.00000000e+00
 0.00000000e+00 7.34387359e-02 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 1.26305204e-01 0.00000000e+00 2.80982229e-03
 1.77267775e-01 0.00000000e+00 2.24504326e-03 0.00000000e+00
 1.01436288e-02 0.00000000e+00 0.00000000e+00 1.29397410e-02]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.06656230449676513,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      5.0987643623352055,
      0.0,
      0.014200942367315292,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.09970060772365993,
      0.0
    ]
  },
  "16": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.07343873586919573,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.12630520385172633
    ]
  },
  "18": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.002809822294447157,
      0.17726777532862292,
      0.0,
      0.002245043259527948
    ]
  },
  "19": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.010143628782696194,
      0.0,
      0.0,
      0.012939741015434264
    ]
  },
  "8": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_18.png

通信计算
传输时延: 6.78s
标注时延: 0.02s
训练时延: 2.11s
广播时延: 4.88s
通信时延: 13.78s
连续学习指标 (任务 1):
  AA: 0.3693   - 当前模型平均准确率
  AIA: 0.2758  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.4885
  current_domain_loss: 2.3502
total_delay:13.784708711362732
global_dataset_size:1600
奖励计算 - 损失降幅: 764.7918, 奖励: 0.0347
数据异质性图已保存至./results/data_heterogeneity_session_18.png
Saved: session18_core_metrics_session18_20251211_155953.png
Saved: session18_accuracy_evolution_session18_20251211_155953.png
Saved: session18_sample_count_session18_20251211_155953.png
Saved: session18_communication_delay_session18_20251211_155953.png
Saved: session18_training_loss_session18_20251211_155953.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 20/30 ===
Session 19: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 10
上传批次: [1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 2, 1]
带宽分配: [0.06051352 0.25781733 0.         0.         0.0064106  0.03129076
 0.         0.         0.         0.         0.04334025 0.07202365
 0.         0.01162013 0.         0.         0.         0.
 0.49405769 0.02292607]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 1 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 18 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：10
缓存中旧数据批次：90
Epoch 1, train_loss: 3.2603, val_loss: 3.3948 *
Epoch 2, train_loss: 3.9341, val_loss: 2.8629 *
Epoch 3, train_loss: 3.1572, val_loss: 2.4870 *
Epoch 4, train_loss: 2.6779, val_loss: 2.4753 *
Epoch 5, train_loss: 2.3885, val_loss: 2.4193 *
Epoch 6, train_loss: 2.2228, val_loss: 2.4406, patience_counter/patience: 1/5
Epoch 7, train_loss: 2.0709, val_loss: 2.4000 *
Epoch 8, train_loss: 1.9408, val_loss: 2.4209, patience_counter/patience: 1/5
Epoch 9, train_loss: 1.8428, val_loss: 2.3183 *
Epoch 10, train_loss: 1.7664, val_loss: 2.3278, patience_counter/patience: 1/5
Epoch 11, train_loss: 1.7005, val_loss: 2.3479, patience_counter/patience: 2/5
Epoch 12, train_loss: 1.6459, val_loss: 2.3664, patience_counter/patience: 3/5
Epoch 13, train_loss: 1.6026, val_loss: 2.4346, patience_counter/patience: 4/5
Epoch 14, train_loss: 3.1363, val_loss: 3.8761, patience_counter/patience: 5/5
早停触发！在epoch 14停止
调试信息：
{'training_loss': 3.136258410215378, 'epoch_losses': [3.260294897556305, 3.9341119527816772, 3.157225549221039, 2.677874686717987, 2.3885322284698485, 2.222832427024841, 2.0709110927581786, 1.9408251070976257, 1.8428391754627227, 1.7664294707775117, 1.7004907190799714, 1.645949183702469, 1.6026435101032257, 3.136258410215378], 'val_losses': [3.3948277711868284, 2.8628962516784666, 2.487023401260376, 2.475297474861145, 2.419326829910278, 2.4405833005905153, 2.399950456619263, 2.420897364616394, 2.3183438539505006, 2.3277877807617187, 2.347935438156128, 2.366390085220337, 2.4346462726593017, 3.876113700866699], 'actual_epochs': 14, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.75362369 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.05165125 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.00323129 0.         0.         0.         1.54072391 0.
 0.         0.         0.00568703 0.01594232]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.7536236872673033,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.051651246303692465,
      0.0
    ]
  },
  "15": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.003231294581666588,
      0.0,
      0.0,
      0.0,
      1.5407239109277726
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.005687033161520958,
      0.01594231629371643
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_19.png

通信计算
传输时延: 3.20s
标注时延: 0.00s
训练时延: 1.34s
广播时延: 6.03s
通信时延: 10.57s
连续学习指标 (任务 2):
  AA: 0.3958   - 当前模型平均准确率
  AIA: 0.2818  - 平均增量准确率
  FM: -0.2895   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.4528
  current_domain_loss: 2.2417
total_delay:10.573144324025535
global_dataset_size:1600
奖励计算 - 损失降幅: 164.7191, 奖励: 0.0097
数据异质性图已保存至./results/data_heterogeneity_session_19.png
Saved: session19_core_metrics_session19_20251211_160554.png
Saved: session19_accuracy_evolution_session19_20251211_160554.png
Saved: session19_sample_count_session19_20251211_160554.png
Saved: session19_communication_delay_session19_20251211_160554.png
Saved: session19_training_loss_session19_20251211_160554.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 21/30 ===
Session 20: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 3
上传批次: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0]
带宽分配: [0.         0.         0.         0.         0.         0.
 0.         0.         0.00955398 0.         0.         0.03704714
 0.         0.         0.         0.95339888 0.         0.
 0.         0.        ]
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：3
缓存中旧数据批次：97
Epoch 1, train_loss: 2.1364, val_loss: 4.0964 *
Epoch 2, train_loss: 3.4736, val_loss: 4.3564, patience_counter/patience: 1/5
Epoch 3, train_loss: 2.9806, val_loss: 3.2837 *
Epoch 4, train_loss: 2.5074, val_loss: 3.1985 *
Epoch 5, train_loss: 2.2449, val_loss: 3.4054, patience_counter/patience: 1/5
Epoch 6, train_loss: 2.0634, val_loss: 3.1309 *
Epoch 7, train_loss: 1.9271, val_loss: 3.0593 *
Epoch 8, train_loss: 1.8186, val_loss: 3.0420 *
Epoch 9, train_loss: 1.7372, val_loss: 3.0558, patience_counter/patience: 1/5
Epoch 10, train_loss: 1.6758, val_loss: 3.0468, patience_counter/patience: 2/5
Epoch 11, train_loss: 1.6207, val_loss: 3.0921, patience_counter/patience: 3/5
Epoch 12, train_loss: 1.5741, val_loss: 3.1053, patience_counter/patience: 4/5
Epoch 13, train_loss: 1.5340, val_loss: 3.1179, patience_counter/patience: 5/5
早停触发！在epoch 13停止
调试信息：
{'training_loss': 1.5339997100830078, 'epoch_losses': [2.136363763809204, 3.4735544109344483, 2.980555040836334, 2.5074384951591493, 2.2449191188812256, 2.0633850538730623, 1.927067312002182, 1.8186224317550659, 1.7372304463386536, 1.6758092486858367, 1.6206653773784638, 1.5740529441833495, 1.5339997100830078], 'val_losses': [4.096403224127633, 4.356427226747785, 3.283695323126657, 3.198484335626875, 3.405435170446123, 3.1308525800704956, 3.0593248094831194, 3.0420343024390086, 3.0558089869362965, 3.046822888510568, 3.0921136481421336, 3.1052574600492204, 3.117863723209926], 'actual_epochs': 13, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 6.37295969e-02 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 8.98527299e-01 0.00000000e+00 5.00298554e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 4.19503467e-01 0.00000000e+00
 0.00000000e+00 0.00000000e+00 7.44827224e-04 1.14931982e-02]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.06372959689133696,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.8985272991657257,
      0.0,
      0.5002985535727607
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.4195034666193856
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0007448272241486444,
      0.011493198192781873
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_20.png

通信计算
传输时延: 5.40s
标注时延: 0.00s
训练时延: 1.25s
广播时延: 17.10s
通信时延: 23.75s
连续学习指标 (任务 3):
  AA: 0.4006   - 当前模型平均准确率
  AIA: 0.2875  - 平均增量准确率
  FM: -0.2795   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3131
  current_domain_loss: 3.2124
total_delay:23.751220977380434
global_dataset_size:1600
奖励计算 - 损失降幅: 31.4537, 奖励: 0.0008
数据异质性图已保存至./results/data_heterogeneity_session_20.png
Saved: session20_core_metrics_session20_20251211_161130.png
Saved: session20_accuracy_evolution_session20_20251211_161130.png
Saved: session20_sample_count_session20_20251211_161130.png
Saved: session20_communication_delay_session20_20251211_161130.png
Saved: session20_training_loss_session20_20251211_161130.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 22/30 ===
Session 21: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 51
上传批次: [0, 0, 4, 2, 4, 2, 4, 1, 1, 0, 5, 1, 3, 4, 4, 2, 0, 4, 5, 5]
带宽分配: [0.         0.         0.00378928 0.00064114 0.00127591 0.00731334
 0.30498762 0.00046733 0.00316429 0.         0.04859156 0.00685836
 0.0011984  0.01682888 0.00747922 0.07113006 0.         0.00566839
 0.42398474 0.09662149]
车辆 2 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 3 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 4 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 5 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 6 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 7 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 12 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 13 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 14 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 15 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 17 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 18 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 19 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：51
缓存中旧数据批次：49
Epoch 1, train_loss: 3.3672, val_loss: 3.5997 *
Epoch 2, train_loss: 3.8172, val_loss: 2.7792 *
Epoch 3, train_loss: 2.9641, val_loss: 2.7629 *
Epoch 4, train_loss: 2.5987, val_loss: 2.8465, patience_counter/patience: 1/5
Epoch 5, train_loss: 2.4139, val_loss: 2.9026, patience_counter/patience: 2/5
Epoch 6, train_loss: 2.2880, val_loss: 2.8502, patience_counter/patience: 3/5
Epoch 7, train_loss: 2.2208, val_loss: 2.9148, patience_counter/patience: 4/5
Epoch 8, train_loss: 2.1929, val_loss: 3.0220, patience_counter/patience: 5/5
早停触发！在epoch 8停止
调试信息：
{'training_loss': 2.192922101020813, 'epoch_losses': [3.36719868183136, 3.8172480726242064, 2.9640835881233216, 2.5986793541908266, 2.4139191246032716, 2.288024845123291, 2.2207730126380922, 2.192922101020813], 'val_losses': [3.5997275378968983, 2.7792069647047253, 2.762911574708091, 2.846543143192927, 2.902554283539454, 2.850222203466627, 2.914808068010542, 3.022025532192654], 'actual_epochs': 8, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.01386517 0.
 0.         0.         0.         0.02693319 0.         0.
 0.         0.         0.         0.05436792 0.         0.
 0.         0.         0.09564298 0.         0.         0.
 0.         0.         0.         0.01628285 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.09245016 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.07598512
 0.         0.13637805 0.         0.         0.         0.
 0.         0.         0.11570885 0.01339286 0.         0.
 0.         0.         0.         0.03070844]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.013865166157484055
    ]
  },
  "2": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.05436791896820068,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.09564298152923584,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.01628284826874733,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.09245015859603882,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0759851217828691,
      0.0
    ]
  },
  "17": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.1363780528306961,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.11570884823799134,
      0.013392857313156127,
      0.0
    ]
  },
  "19": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.030708440393209458
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.02693319320678711
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_21.png

通信计算
传输时延: 23.99s
标注时延: 0.02s
训练时延: 0.77s
广播时延: 9.45s
通信时延: 34.22s
连续学习指标 (任务 1):
  AA: 0.2518   - 当前模型平均准确率
  AIA: 0.2859  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3890
  current_domain_loss: 2.6863
total_delay:34.22220429868959
global_dataset_size:1600
奖励计算 - 损失降幅: 151.3806, 奖励: 0.0028
数据异质性图已保存至./results/data_heterogeneity_session_21.png
Saved: session21_core_metrics_session21_20251211_161519.png
Saved: session21_accuracy_evolution_session21_20251211_161519.png
Saved: session21_sample_count_session21_20251211_161519.png
Saved: session21_communication_delay_session21_20251211_161519.png
Saved: session21_training_loss_session21_20251211_161519.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 23/30 ===
Session 22: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 10
上传批次: [0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 2, 1, 1, 1, 0, 0, 0]
带宽分配: [0.00000000e+00 2.23186857e-16 0.00000000e+00 1.22470295e-02
 0.00000000e+00 2.57555616e-01 0.00000000e+00 0.00000000e+00
 1.20770574e-01 1.49425150e-02 0.00000000e+00 0.00000000e+00
 1.11478617e-02 2.28658657e-02 2.40405218e-01 5.34906051e-02
 2.66574715e-01 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 5 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 12 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 14 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：10
缓存中旧数据批次：90
Epoch 1, train_loss: 2.7962, val_loss: 3.0692 *
Epoch 2, train_loss: 2.5952, val_loss: 2.8222 *
Epoch 3, train_loss: 2.4120, val_loss: 3.0527, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.3370, val_loss: 3.0544, patience_counter/patience: 2/5
Epoch 5, train_loss: 2.2458, val_loss: 3.1006, patience_counter/patience: 3/5
Epoch 6, train_loss: 2.2210, val_loss: 3.1304, patience_counter/patience: 4/5
Epoch 7, train_loss: 2.2704, val_loss: 3.0802, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 2.270367202758789, 'epoch_losses': [2.7961620140075683, 2.595197458267212, 2.4119676685333253, 2.33704142332077, 2.245847896337509, 2.220953652858734, 2.270367202758789], 'val_losses': [3.0692225337028503, 2.8222304821014403, 3.0527000427246094, 3.0543771743774415, 3.100606989860535, 3.1304270744323732, 3.08024206161499], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.08064446 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.23164215 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.218479   0.
 0.         0.         0.         0.         0.         0.01635712
 0.         0.         0.         0.         0.         0.05283781
 0.         0.         0.         0.         0.         0.
 0.02166663 0.         0.         0.02842766]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.08064446151256562,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.21847900390625,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0163571198284626,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.05283781160910924
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.02166662782430649,
      0.0,
      0.0,
      0.028427663147449492
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.23164215008417763
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_22.png

通信计算
传输时延: 1.32s
标注时延: 0.00s
训练时延: 0.67s
广播时延: 34.87s
通信时延: 36.86s
连续学习指标 (任务 2):
  AA: 0.3261   - 当前模型平均准确率
  AIA: 0.2876  - 平均增量准确率
  FM: -0.2416   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3522
  current_domain_loss: 2.6834
total_delay:36.86314296710778
global_dataset_size:1600
奖励计算 - 损失降幅: 202.7747, 奖励: 0.0034
数据异质性图已保存至./results/data_heterogeneity_session_22.png
Saved: session22_core_metrics_session22_20251211_161809.png
Saved: session22_accuracy_evolution_session22_20251211_161809.png
Saved: session22_sample_count_session22_20251211_161809.png
Saved: session22_communication_delay_session22_20251211_161809.png
Saved: session22_training_loss_session22_20251211_161809.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 24/30 ===
Session 23: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 1
上传批次: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
带宽分配: [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1. 0. 0. 0. 0.]
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：1
缓存中旧数据批次：99
Epoch 1, train_loss: 2.4106, val_loss: 3.9095 *
Epoch 2, train_loss: 2.3556, val_loss: 4.1645, patience_counter/patience: 1/5
Epoch 3, train_loss: 2.3596, val_loss: 3.9424, patience_counter/patience: 2/5
Epoch 4, train_loss: 2.3098, val_loss: 4.5393, patience_counter/patience: 3/5
Epoch 5, train_loss: 2.2072, val_loss: 3.9297, patience_counter/patience: 4/5
Epoch 6, train_loss: 2.1284, val_loss: 4.1218, patience_counter/patience: 5/5
早停触发！在epoch 6停止
调试信息：
{'training_loss': 2.128393895626068, 'epoch_losses': [2.4106391882896423, 2.35559321641922, 2.359626829624176, 2.3098333191871645, 2.2072152864933012, 2.128393895626068], 'val_losses': [3.9095136438097273, 4.16454781804766, 3.942384992327009, 4.539312192371914, 3.9297382150377547, 4.121828828539167], 'actual_epochs': 6, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.07779405 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.22152531 0.         0.00292432 0.00200353]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.07779405117034913
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.22152531489729882,
      0.0,
      0.002924320101737976,
      0.002003525421023369
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_23.png

通信计算
传输时延: 0.84s
标注时延: 0.00s
训练时延: 0.58s
广播时延: 7.32s
通信时延: 8.74s
连续学习指标 (任务 3):
  AA: 0.3413   - 当前模型平均准确率
  AIA: 0.2898  - 平均增量准确率
  FM: -0.2361   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2222
  current_domain_loss: 3.8489
total_delay:8.735435823748734
global_dataset_size:1600
奖励计算 - 损失降幅: 8.3647, 奖励: 0.0006
数据异质性图已保存至./results/data_heterogeneity_session_23.png
Saved: session23_core_metrics_session23_20251211_162041.png
Saved: session23_accuracy_evolution_session23_20251211_162041.png
Saved: session23_sample_count_session23_20251211_162041.png
Saved: session23_communication_delay_session23_20251211_162041.png
Saved: session23_training_loss_session23_20251211_162041.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 25/30 ===
Session 24: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 60
上传批次: [4, 0, 4, 4, 0, 2, 4, 3, 4, 0, 3, 5, 5, 4, 4, 4, 1, 4, 1, 4]
带宽分配: [0.09168876 0.         0.03832406 0.00221577 0.         0.35015481
 0.01422273 0.00139037 0.01792943 0.         0.00412452 0.02336028
 0.00422684 0.00479817 0.0052786  0.00850106 0.14050152 0.04071158
 0.15001676 0.10255476]
车辆 0 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 2 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 3 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 5 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 6 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 7 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 8 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 10 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 11 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 12 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 13 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 14 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 15 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 16 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 17 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 18 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：60
缓存中旧数据批次：40
Epoch 1, train_loss: 3.1358, val_loss: 3.1088 *
Epoch 2, train_loss: 3.0368, val_loss: 2.7911 *
Epoch 3, train_loss: 2.6267, val_loss: 2.8020, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.4214, val_loss: 2.6803 *
Epoch 5, train_loss: 2.2464, val_loss: 2.6580 *
Epoch 6, train_loss: 2.1292, val_loss: 2.6732, patience_counter/patience: 1/5
Epoch 7, train_loss: 2.0139, val_loss: 2.7518, patience_counter/patience: 2/5
Epoch 8, train_loss: 1.9205, val_loss: 2.7273, patience_counter/patience: 3/5
Epoch 9, train_loss: 1.8354, val_loss: 2.6702, patience_counter/patience: 4/5
Epoch 10, train_loss: 1.7654, val_loss: 2.6409 *
Epoch 11, train_loss: 1.7029, val_loss: 2.6135 *
Epoch 12, train_loss: 1.6531, val_loss: 2.6081 *
Epoch 13, train_loss: 1.6097, val_loss: 2.6197, patience_counter/patience: 1/5
Epoch 14, train_loss: 1.5713, val_loss: 2.6290, patience_counter/patience: 2/5
Epoch 15, train_loss: 1.5379, val_loss: 2.6430, patience_counter/patience: 3/5
Epoch 16, train_loss: 1.6712, val_loss: 4.5852, patience_counter/patience: 4/5
Epoch 17, train_loss: 4.5612, val_loss: 2.9826, patience_counter/patience: 5/5
早停触发！在epoch 17停止
调试信息：
{'training_loss': 4.561233365535736, 'epoch_losses': [3.1358108353614806, 3.0367667961120604, 2.62667829990387, 2.4213802218437195, 2.246435670852661, 2.129199743270874, 2.013859912157059, 1.9204766976833343, 1.835375839471817, 1.7654297268390655, 1.702890487909317, 1.6531273806095124, 1.6096597516536713, 1.5712804365158082, 1.5378703558444977, 1.671183351278305, 4.561233365535736], 'val_losses': [3.1088389423158436, 2.7911079426606498, 2.8019568953249188, 2.680277360810174, 2.657982326216168, 2.673246999581655, 2.7517880532476635, 2.7273288799656763, 2.670193907287386, 2.640880776776208, 2.6134755975670285, 2.6081353425979614, 2.619707170459959, 2.628973215818405, 2.6429741382598877, 4.5851513213581505, 2.982569740878211], 'actual_epochs': 17, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 1.84701884e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 1.24021639e-01 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 1.40226032e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 2.02622388e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 1.00502923e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 2.09298317e-02
 0.00000000e+00 0.00000000e+00 0.00000000e+00 2.59630776e-02
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 2.95358811e-02 6.23171045e-04 7.32628108e-03]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.12402163938834115,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      1.4022603205534128,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.20262238795940693,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.10050292308513935,
      0.0
    ]
  },
  "17": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.020929831679050735,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.025963077636865468,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.029535881074575276,
      0.0006231710450867048,
      0.007326281075007641
    ]
  },
  "8": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      1.8470188357279849
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_24.png

通信计算
传输时延: 10.88s
标注时延: 0.02s
训练时延: 1.63s
广播时延: 9.11s
通信时延: 21.63s
连续学习指标 (任务 1):
  AA: 0.3212   - 当前模型平均准确率
  AIA: 0.2911  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.4796
  current_domain_loss: 2.4924
total_delay:21.634285688931413
global_dataset_size:1600
奖励计算 - 损失降幅: 634.6284, 奖励: 0.0183
数据异质性图已保存至./results/data_heterogeneity_session_24.png
Saved: session24_core_metrics_session24_20251211_162741.png
Saved: session24_accuracy_evolution_session24_20251211_162741.png
Saved: session24_sample_count_session24_20251211_162741.png
Saved: session24_communication_delay_session24_20251211_162741.png
Saved: session24_training_loss_session24_20251211_162741.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 26/30 ===
Session 25: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 13
上传批次: [1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 2, 1, 1, 0, 0, 0, 1]
带宽分配: [2.25322157e-01 4.50604756e-17 9.79572518e-02 3.02483771e-03
 0.00000000e+00 0.00000000e+00 1.80417930e-02 5.67639214e-03
 1.46106025e-02 3.68012924e-02 0.00000000e+00 2.44260042e-01
 0.00000000e+00 7.18740192e-02 5.33024703e-02 1.15661853e-02
 0.00000000e+00 0.00000000e+00 0.00000000e+00 2.17562957e-01]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 2 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 7 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 14 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 19 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：13
缓存中旧数据批次：87
Epoch 1, train_loss: 3.0743, val_loss: 3.8602 *
Epoch 2, train_loss: 3.2459, val_loss: 2.9336 *
Epoch 3, train_loss: 2.5705, val_loss: 2.5633 *
Epoch 4, train_loss: 2.2221, val_loss: 2.5667, patience_counter/patience: 1/5
Epoch 5, train_loss: 2.0570, val_loss: 2.8315, patience_counter/patience: 2/5
Epoch 6, train_loss: 1.9400, val_loss: 2.6308, patience_counter/patience: 3/5
Epoch 7, train_loss: 1.8442, val_loss: 2.6721, patience_counter/patience: 4/5
Epoch 8, train_loss: 1.7694, val_loss: 2.7279, patience_counter/patience: 5/5
早停触发！在epoch 8停止
调试信息：
{'training_loss': 1.7694153988361359, 'epoch_losses': [3.0743019914627077, 3.245900809764862, 2.5704805636405945, 2.2221130359172823, 2.0570402562618257, 1.9399585604667664, 1.8442298722267152, 1.7694153988361359], 'val_losses': [3.8601808309555055, 2.9335720539093018, 2.5633495092391967, 2.5667394042015075, 2.8315473794937134, 2.6308494448661803, 2.6720677614212036, 2.7278725624084474], 'actual_epochs': 8, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.08104381 0.         0.
 0.         0.         0.01945842 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.04880828 0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.22862661
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.12993897 0.         0.         0.
 0.         0.01690618 0.         0.         0.         0.01139456
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.0849347 ]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.01945842131972313
    ]
  },
  "3": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.04880828037858009
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.22862661480903626
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.12993897199630738
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.01690618246793747
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.011394563019275666,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.08493470430374145
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.08104380816221238
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_25.png

通信计算
传输时延: 2.47s
标注时延: 0.00s
训练时延: 0.77s
广播时延: 5.29s
通信时延: 8.53s
连续学习指标 (任务 2):
  AA: 0.3485   - 当前模型平均准确率
  AIA: 0.2933  - 平均增量准确率
  FM: -0.2913   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3396
  current_domain_loss: 2.6348
total_delay:8.532706700077517
global_dataset_size:1600
奖励计算 - 损失降幅: 197.5124, 奖励: 0.0145
数据异质性图已保存至./results/data_heterogeneity_session_25.png
Saved: session25_core_metrics_session25_20251211_163047.png
Saved: session25_accuracy_evolution_session25_20251211_163047.png
Saved: session25_sample_count_session25_20251211_163047.png
Saved: session25_communication_delay_session25_20251211_163047.png
Saved: session25_training_loss_session25_20251211_163047.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 27/30 ===
Session 26: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 4
上传批次: [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0]
带宽分配: [3.62230847e-15 0.00000000e+00 1.50929519e-16 0.00000000e+00
 2.86928826e-02 3.77323799e-17 0.00000000e+00 0.00000000e+00
 3.11665279e-01 0.00000000e+00 0.00000000e+00 5.55008432e-01
 0.00000000e+00 1.04633407e-01 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：4
缓存中旧数据批次：96
Epoch 1, train_loss: 2.3902, val_loss: 4.0102 *
Epoch 2, train_loss: 2.3406, val_loss: 3.9046 *
Epoch 3, train_loss: 2.2643, val_loss: 4.2601, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.1791, val_loss: 3.9981, patience_counter/patience: 2/5
Epoch 5, train_loss: 2.0904, val_loss: 4.1830, patience_counter/patience: 3/5
Epoch 6, train_loss: 2.0115, val_loss: 3.9174, patience_counter/patience: 4/5
Epoch 7, train_loss: 1.9444, val_loss: 3.5407 *
Epoch 8, train_loss: 1.9179, val_loss: 4.2356, patience_counter/patience: 1/5
Epoch 9, train_loss: 1.9730, val_loss: 3.8311, patience_counter/patience: 2/5
Epoch 10, train_loss: 2.2025, val_loss: 4.9327, patience_counter/patience: 3/5
Epoch 11, train_loss: 2.6275, val_loss: 4.0649, patience_counter/patience: 4/5
Epoch 12, train_loss: 2.3837, val_loss: 3.9532, patience_counter/patience: 5/5
早停触发！在epoch 12停止
调试信息：
{'training_loss': 2.3836996257305145, 'epoch_losses': [2.3901534402370452, 2.3405738317966462, 2.2642930865287783, 2.1791197085380554, 2.090433521270752, 2.011491199731827, 1.944440995454788, 1.9179465413093566, 1.97300910115242, 2.2024580001831056, 2.627526993751526, 2.3836996257305145], 'val_losses': [4.010156529290335, 3.9045866898127963, 4.260055814470563, 3.998051166534424, 4.183035339627947, 3.9174375534057617, 3.5407152516501292, 4.2356149809701105, 3.831099135535104, 4.932683331625802, 4.0648995126996725, 3.9531752722603932], 'actual_epochs': 12, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.83257024 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         1.03583293 0.         0.
 0.         0.         0.28888999 0.         0.         0.
 0.         0.10100864 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.02680189 0.         0.         0.         0.
 0.         0.03151382 0.         0.21169082]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.8325702399015427
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      1.0358329251408578
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.28888999223709105
    ]
  },
  "15": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.10100863799452782
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.026801892668008805,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.03151381543837488,
      0.0,
      0.2116908235475421
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_26.png

通信计算
传输时延: 0.57s
标注时延: 0.00s
训练时延: 1.15s
广播时延: 10.36s
通信时延: 12.09s
连续学习指标 (任务 3):
  AA: 0.3822   - 当前模型平均准确率
  AIA: 0.2966  - 平均增量准确率
  FM: -0.2822   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.2525
  current_domain_loss: 3.4986
total_delay:12.086766533765282
global_dataset_size:1600
奖励计算 - 损失降幅: 49.3534, 奖励: 0.0026
数据异质性图已保存至./results/data_heterogeneity_session_26.png
Saved: session26_core_metrics_session26_20251211_163527.png
Saved: session26_accuracy_evolution_session26_20251211_163527.png
Saved: session26_sample_count_session26_20251211_163527.png
Saved: session26_communication_delay_session26_20251211_163527.png
Saved: session26_training_loss_session26_20251211_163527.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 28/30 ===
Session 27: 域切换 dslr -> amazon
域从 dslr 切换到 amazon，已提升缓存中的数据。
车辆 0 在域 amazon 中共有 6 个批次
车辆 1 在域 amazon 中共有 3 个批次
车辆 2 在域 amazon 中共有 5 个批次
车辆 3 在域 amazon 中共有 4 个批次
车辆 4 在域 amazon 中共有 4 个批次
车辆 5 在域 amazon 中共有 4 个批次
车辆 6 在域 amazon 中共有 4 个批次
车辆 7 在域 amazon 中共有 3 个批次
车辆 8 在域 amazon 中共有 5 个批次
车辆 9 在域 amazon 中共有 5 个批次
车辆 10 在域 amazon 中共有 5 个批次
车辆 11 在域 amazon 中共有 6 个批次
车辆 12 在域 amazon 中共有 6 个批次
车辆 13 在域 amazon 中共有 6 个批次
车辆 14 在域 amazon 中共有 5 个批次
车辆 15 在域 amazon 中共有 5 个批次
车辆 16 在域 amazon 中共有 6 个批次
车辆 17 在域 amazon 中共有 4 个批次
车辆 18 在域 amazon 中共有 6 个批次
车辆 19 在域 amazon 中共有 5 个批次

 环境更新完成 - 当前域: amazon

决策结果
总上传批次: 48
上传批次: [3, 1, 1, 3, 2, 3, 4, 1, 1, 1, 4, 0, 0, 5, 0, 5, 4, 3, 4, 3]
带宽分配: [9.94947824e-02 6.86577664e-03 4.17242938e-03 3.72862303e-04
 5.14126518e-04 1.11437252e-01 2.81552889e-03 2.67166987e-04
 7.40705181e-04 4.45498484e-04 2.08247870e-03 0.00000000e+00
 0.00000000e+00 1.31215794e-03 0.00000000e+00 6.85897302e-02
 7.02381401e-02 2.71011498e-02 5.83623200e-01 1.99270149e-02]
车辆 0 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 1 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 2 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 3 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 4 缓存维护: 移除了 2 个批次, 剩余 3 个旧批次, 2 个新批次
车辆 5 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 6 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 7 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 8 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 9 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 13 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 15 缓存维护: 移除了 5 个批次, 剩余 0 个旧批次, 5 个新批次
车辆 16 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 17 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次
车辆 18 缓存维护: 移除了 4 个批次, 剩余 1 个旧批次, 4 个新批次
车辆 19 缓存维护: 移除了 3 个批次, 剩余 2 个旧批次, 3 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：48
缓存中旧数据批次：52
Epoch 1, train_loss: 2.5516, val_loss: 3.0465 *
Epoch 2, train_loss: 2.6752, val_loss: 2.8555 *
Epoch 3, train_loss: 2.3934, val_loss: 2.9202, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.1542, val_loss: 2.7210 *
Epoch 5, train_loss: 2.0144, val_loss: 2.6958 *
Epoch 6, train_loss: 1.8968, val_loss: 2.6343 *
Epoch 7, train_loss: 1.8138, val_loss: 2.6111 *
Epoch 8, train_loss: 1.7524, val_loss: 2.6177, patience_counter/patience: 1/5
Epoch 9, train_loss: 1.6970, val_loss: 2.6153, patience_counter/patience: 2/5
Epoch 10, train_loss: 1.6471, val_loss: 2.6036 *
Epoch 11, train_loss: 1.6076, val_loss: 2.6093, patience_counter/patience: 1/5
Epoch 12, train_loss: 1.5728, val_loss: 2.6188, patience_counter/patience: 2/5
Epoch 13, train_loss: 1.5406, val_loss: 2.6406, patience_counter/patience: 3/5
Epoch 14, train_loss: 1.5123, val_loss: 2.6550, patience_counter/patience: 4/5
Epoch 15, train_loss: 1.4805, val_loss: 2.6928, patience_counter/patience: 5/5
早停触发！在epoch 15停止
调试信息：
{'training_loss': 1.4805252754688263, 'epoch_losses': [2.5515677845478058, 2.6751503670215606, 2.3933900892734528, 2.1541650676727295, 2.014412225484848, 1.8967570328712464, 1.8137856769561767, 1.7524298429489136, 1.696996296644211, 1.6470648741722107, 1.6075889050960541, 1.5728347301483154, 1.5405950951576233, 1.5122606730461121, 1.4805252754688263], 'val_losses': [3.046456025706397, 2.8554979960123696, 2.9202022519376545, 2.720979541540146, 2.695781194501453, 2.634330087237888, 2.611094183391995, 2.6177226271894245, 2.615319914287991, 2.603565447860294, 2.6093345085779824, 2.61877398358451, 2.6406140989727445, 2.6550428105725183, 2.692789524793625], 'actual_epochs': 15, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 1.28549419e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 1.74605193e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00
 1.53751855e-01 1.05312351e-03 3.08748809e-04 4.71292145e-04]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 3,
    "new_data_size": 2,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      1.2854941920800644,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      1.7460519296472723
    ]
  },
  "15": {
    "old_data_size": 0,
    "new_data_size": 5,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 1,
    "new_data_size": 4,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 2,
    "new_data_size": 3,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.1537518545985222,
      0.0010531235147606243,
      0.00030874880877408115,
      0.0004712921448729255
    ]
  },
  "8": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_27.png

通信计算
传输时延: 39.14s
标注时延: 0.02s
训练时延: 1.44s
广播时延: 18.44s
通信时延: 59.04s
连续学习指标 (任务 1):
  AA: 0.3501   - 当前模型平均准确率
  AIA: 0.2985  - 平均增量准确率
  FM: 0.0000   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.4796
  current_domain_loss: 2.5235
total_delay:59.041291810003486
global_dataset_size:1600
奖励计算 - 损失降幅: 444.0693, 奖励: 0.0047
数据异质性图已保存至./results/data_heterogeneity_session_27.png
Saved: session27_core_metrics_session27_20251211_164128.png
Saved: session27_accuracy_evolution_session27_20251211_164128.png
Saved: session27_sample_count_session27_20251211_164128.png
Saved: session27_communication_delay_session27_20251211_164128.png
Saved: session27_training_loss_session27_20251211_164128.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 29/30 ===
Session 28: 域切换 amazon -> webcam
域从 amazon 切换到 webcam，已提升缓存中的数据。
车辆 0 在域 webcam 中共有 1 个批次
车辆 1 在域 webcam 中共有 1 个批次
车辆 2 在域 webcam 中共有 1 个批次
车辆 3 在域 webcam 中共有 1 个批次
车辆 4 在域 webcam 中共有 1 个批次
车辆 5 在域 webcam 中共有 1 个批次
车辆 6 在域 webcam 中共有 1 个批次
车辆 7 在域 webcam 中共有 1 个批次
车辆 8 在域 webcam 中共有 1 个批次
车辆 9 在域 webcam 中共有 1 个批次
车辆 10 在域 webcam 中共有 1 个批次
车辆 11 在域 webcam 中共有 1 个批次
车辆 12 在域 webcam 中共有 1 个批次
车辆 13 在域 webcam 中共有 2 个批次
车辆 14 在域 webcam 中共有 1 个批次
车辆 15 在域 webcam 中共有 1 个批次
车辆 16 在域 webcam 中共有 1 个批次
车辆 17 在域 webcam 中共有 1 个批次
车辆 18 在域 webcam 中共有 2 个批次
车辆 19 在域 webcam 中共有 1 个批次

 环境更新完成 - 当前域: webcam

决策结果
总上传批次: 6
上传批次: [1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0]
带宽分配: [0.29792741 0.         0.2820948  0.         0.         0.
 0.27491744 0.         0.         0.         0.08290832 0.
 0.         0.02444281 0.         0.03770922 0.         0.
 0.         0.        ]
车辆 0 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 2 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 6 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 10 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：6
缓存中旧数据批次：94
Epoch 1, train_loss: 2.1515, val_loss: 4.6396 *
Epoch 2, train_loss: 3.5906, val_loss: 3.2283 *
Epoch 3, train_loss: 2.7639, val_loss: 2.8251 *
Epoch 4, train_loss: 2.2785, val_loss: 2.7740 *
Epoch 5, train_loss: 2.0472, val_loss: 2.7853, patience_counter/patience: 1/5
Epoch 6, train_loss: 1.9068, val_loss: 2.6700 *
Epoch 7, train_loss: 1.8088, val_loss: 2.6914, patience_counter/patience: 1/5
Epoch 8, train_loss: 1.7313, val_loss: 2.6816, patience_counter/patience: 2/5
Epoch 9, train_loss: 1.6739, val_loss: 2.7026, patience_counter/patience: 3/5
Epoch 10, train_loss: 1.6226, val_loss: 2.7360, patience_counter/patience: 4/5
Epoch 11, train_loss: 1.5785, val_loss: 2.7631, patience_counter/patience: 5/5
早停触发！在epoch 11停止
调试信息：
{'training_loss': 1.5784749603271484, 'epoch_losses': [2.1514929378032686, 3.590649642944336, 2.763868727684021, 2.27847265124321, 2.0472318720817566, 1.9068441903591156, 1.8088254737854004, 1.7312618708610534, 1.6738533210754394, 1.6226430451869964, 1.5784749603271484], 'val_losses': [4.639618158340454, 3.228312373161316, 2.825109338760376, 2.7740462899208067, 2.785264086723328, 2.6700489997863768, 2.6913631916046143, 2.6815969705581666, 2.7025619626045225, 2.735965001583099, 2.7631468415260314], 'actual_epochs': 11, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.5289837  0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.08177348 0.         0.         0.
 0.         0.13531016 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.06046479
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.28950265 0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.22553745 0.         0.00119066 0.00198481]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.5289837047031948,
      0.0,
      0.0
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.08177348000662668,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.060464793613978794
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.2895026481151581
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.22553745491164073,
      0.0,
      0.0011906587332487107,
      0.001984806124653135
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.13531015634536744,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_28.png

通信计算
传输时延: 1.73s
标注时延: 0.00s
训练时延: 1.06s
广播时延: 21.19s
通信时延: 23.98s
连续学习指标 (任务 2):
  AA: 0.3725   - 当前模型平均准确率
  AIA: 0.3011  - 平均增量准确率
  FM: -0.3002   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.3522
  current_domain_loss: 2.7283
total_delay:23.976170332700235
global_dataset_size:1600
奖励计算 - 损失降幅: 91.3744, 奖励: 0.0024
数据异质性图已保存至./results/data_heterogeneity_session_28.png
Saved: session28_core_metrics_session28_20251211_164542.png
Saved: session28_accuracy_evolution_session28_20251211_164542.png
Saved: session28_sample_count_session28_20251211_164542.png
Saved: session28_communication_delay_session28_20251211_164542.png
Saved: session28_training_loss_session28_20251211_164542.png
模型更新完成 - 新全局模型已就绪

=== 训练会话 30/30 ===
Session 29: 域切换 webcam -> dslr
域从 webcam 切换到 dslr，已提升缓存中的数据。
车辆 0 在域 dslr 中共有 0 个批次
车辆 1 在域 dslr 中共有 1 个批次
车辆 2 在域 dslr 中共有 0 个批次
车辆 3 在域 dslr 中共有 0 个批次
车辆 4 在域 dslr 中共有 1 个批次
车辆 5 在域 dslr 中共有 0 个批次
车辆 6 在域 dslr 中共有 0 个批次
车辆 7 在域 dslr 中共有 0 个批次
车辆 8 在域 dslr 中共有 1 个批次
车辆 9 在域 dslr 中共有 0 个批次
车辆 10 在域 dslr 中共有 0 个批次
车辆 11 在域 dslr 中共有 1 个批次
车辆 12 在域 dslr 中共有 0 个批次
车辆 13 在域 dslr 中共有 1 个批次
车辆 14 在域 dslr 中共有 0 个批次
车辆 15 在域 dslr 中共有 1 个批次
车辆 16 在域 dslr 中共有 0 个批次
车辆 17 在域 dslr 中共有 0 个批次
车辆 18 在域 dslr 中共有 0 个批次
车辆 19 在域 dslr 中共有 0 个批次

 环境更新完成 - 当前域: dslr

决策结果
总上传批次: 4
上传批次: [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0]
带宽分配: [4.55780687e-15 0.00000000e+00 0.00000000e+00 0.00000000e+00
 1.00424805e-02 0.00000000e+00 0.00000000e+00 0.00000000e+00
 0.00000000e+00 0.00000000e+00 0.00000000e+00 1.36315519e-01
 0.00000000e+00 7.37257427e-03 0.00000000e+00 8.46269426e-01
 0.00000000e+00 0.00000000e+00 0.00000000e+00 0.00000000e+00]
车辆 4 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 11 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 13 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次
车辆 15 缓存维护: 移除了 1 个批次, 剩余 4 个旧批次, 1 个新批次

缓存管理
当前缓存总批次: 100
缓存中新数据批次：4
缓存中旧数据批次：96
Epoch 1, train_loss: 1.8796, val_loss: 4.3159 *
Epoch 2, train_loss: 2.0593, val_loss: 3.7688 *
Epoch 3, train_loss: 2.7054, val_loss: 5.7040, patience_counter/patience: 1/5
Epoch 4, train_loss: 2.6516, val_loss: 5.0369, patience_counter/patience: 2/5
Epoch 5, train_loss: 2.2414, val_loss: 4.1463, patience_counter/patience: 3/5
Epoch 6, train_loss: 2.0087, val_loss: 4.1809, patience_counter/patience: 4/5
Epoch 7, train_loss: 1.8772, val_loss: 4.0861, patience_counter/patience: 5/5
早停触发！在epoch 7停止
调试信息：
{'training_loss': 1.8771671199798583, 'epoch_losses': [1.8795660030841828, 2.0592622888088226, 2.7053772687911986, 2.651607553958893, 2.2414002406597135, 2.0086618447303772, 1.8771671199798583], 'val_losses': [4.315897907529559, 3.7688173225947788, 5.703970909118652, 5.036857468741281, 4.146346092224121, 4.180925505501883, 4.086063895906721], 'actual_epochs': 7, 'config_epochs': 60}
调试信息：经训练后，根据mab选择器结果，所获得的quality_scores为：
[0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.23887948 0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.330231   0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.06092439 0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.         0.         0.         0.         0.         0.
 0.07152903 0.00194838 0.00152805 0.0005434 ]
缓存更新后车辆的缓存信息:
{
  "0": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "2": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "3": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "4": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.23887948195139563
    ]
  },
  "5": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "6": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "7": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "9": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "10": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "11": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "12": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "13": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.3302309989929199
    ]
  },
  "14": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "15": {
    "old_data_size": 4,
    "new_data_size": 1,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.06092439492543539
    ]
  },
  "16": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "17": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "18": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "19": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.07152903378009796,
      0.0019483774776260056,
      0.0015280507504940033,
      0.0005434043208758036
    ]
  },
  "8": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  },
  "1": {
    "old_data_size": 5,
    "new_data_size": 0,
    "total_size": 5,
    "quality_scores": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}
训练损失图已保存至: ./results/training_loss_session_29.png

通信计算
传输时延: 4.91s
标注时延: 0.00s
训练时延: 0.67s
广播时延: 14.72s
通信时延: 20.30s
连续学习指标 (任务 3):
  AA: 0.2714   - 当前模型平均准确率
  AIA: 0.3001  - 平均增量准确率
  FM: -0.1464   - 遗忘度量 (越小越好)
  BWT: 0.0000  - 反向迁移 (正为好)
  current_domain_accuracy: 0.1919
  current_domain_loss: 4.0833
total_delay:20.304404924700005
global_dataset_size:1600
奖励计算 - 损失降幅: 34.0532, 奖励: 0.0010
数据异质性图已保存至./results/data_heterogeneity_session_29.png
Saved: session29_core_metrics_session29_20251211_164830.png
Saved: session29_accuracy_evolution_session29_20251211_164830.png
Saved: session29_sample_count_session29_20251211_164830.png
Saved: session29_communication_delay_session29_20251211_164830.png
Saved: session29_training_loss_session29_20251211_164830.png
模型更新完成 - 新全局模型已就绪

============================================================
联合优化实验完成
============================================================

=== 核心持续学习指标汇总 ===
最终会话 (29) 指标:
  AA: 0.2714 (平均准确率)
  AIA: 0.3001 (平均增量准确率)
  FM: -0.1464 (遗忘度量)
  BWT: 0.0000 (反向迁移)
  当前域准确率: 0.1919

所有会话平均指标:
  平均AA: 0.3001
  平均AIA: 0.2435
  平均FM: -0.1321 (越小越好)
  平均BWT: 0.0000 (正为好)
  平均当前域准确率: 0.3059

=== 通信与训练指标汇总 ===
总通信时延: 548.49s
平均通信时延: 18.28s
最大通信时延: 66.66s (会话 13)
最小通信时延: 5.02s (会话 10)
总训练样本数: 45,216
平均每会话样本数: 1507

训练损失改进:
  最终损失改进: 16.3%
  平均损失改进: 40.4%

训练效率:
  总训练轮次: 299
  平均每会话轮次: 10.0

=== 域性能趋势分析 ===
  域 'amazon': 平均=0.3698, 范围=[0.1723, 0.4885]
  域 'webcam': 平均=0.3226, 范围=[0.0692, 0.4528]
  域 'dslr': 平均=0.2253, 范围=[0.1010, 0.3131]

=== 实验关键结论 ===
1. 连续学习性能:
   ✓ 遗忘控制良好 (FM=-0.1321 < 0.2)
   ✗ 存在负迁移 (BWT=0.0000 <= 0)
2. 系统效率:
   - 平均通信开销: 18.28s/会话
   - 平均训练样本: 1507/会话
   - 平均训练轮次: 10.0/会话

============================================================
